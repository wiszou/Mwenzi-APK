import{s as K,r as Q,o as X}from"../chunks/scheduler.542a8b70.js";import{S as Y,i as Z,g as l,s as L,r as ee,h as i,j as I,y as q,c as T,f as h,u as te,k as e,a as G,x as s,z as k,v as se,A as B,d as re,t as oe,w as ae}from"../chunks/index.def341b4.js";import{T as ne,u as J,t as le,q as ie,w as ue,c as ce,f as de,g as me}from"../chunks/Toaster.d9e0a0cb.js";import{g as fe}from"../chunks/navigation.2fb20aa7.js";const pe=!0,be=Object.freeze(Object.defineProperty({__proto__:null,prerender:pe},Symbol.toStringTag,{value:"Module"}));function ve(b){let d,p,o,a,U='<img src="Mwenzi5.png" class="w-64 duration-500 hover:scale-105 hover:-translate-10" alt="..."/>',C,_,n,m,u,P="Email",E,r,w,f,v,N="Password",A,c,O,y,H="Log In",$,x,S,z,R;return x=new ne({}),{c(){d=l("div"),p=l("div"),o=l("div"),a=l("div"),a.innerHTML=U,C=L(),_=l("div"),n=l("form"),m=l("div"),u=l("label"),u.textContent=P,E=L(),r=l("input"),w=L(),f=l("div"),v=l("label"),v.textContent=N,A=L(),c=l("input"),O=L(),y=l("button"),y.textContent=H,$=L(),ee(x.$$.fragment),this.h()},l(t){d=i(t,"DIV",{class:!0});var g=I(d);p=i(g,"DIV",{class:!0});var W=I(p);o=i(W,"DIV",{class:!0});var V=I(o);a=i(V,"DIV",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-d1io78"&&(a.innerHTML=U),C=T(V),_=i(V,"DIV",{class:!0});var F=I(_);n=i(F,"FORM",{});var D=I(n);m=i(D,"DIV",{class:!0});var M=I(m);u=i(M,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(u)!=="svelte-lgsm1b"&&(u.textContent=P),E=T(M),r=i(M,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),M.forEach(h),w=T(D),f=i(D,"DIV",{class:!0});var j=I(f);v=i(j,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),q(v)!=="svelte-1mnn4ft"&&(v.textContent=N),A=T(j),c=i(j,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),j.forEach(h),O=T(D),y=i(D,"BUTTON",{class:!0,"data-svelte-h":!0}),q(y)!=="svelte-yc3tel"&&(y.textContent=H),D.forEach(h),F.forEach(h),V.forEach(h),W.forEach(h),g.forEach(h),$=T(t),te(x.$$.fragment,t),this.h()},h(){e(a,"class","flex justify-center"),e(u,"for","email"),e(u,"class","block mb-2 text-md font-medium text-gray"),e(r,"type","email"),e(r,"name","email"),e(r,"id","email"),e(r,"placeholder","Email"),e(r,"class","w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-3xl focus:outline-none"),e(m,"class","mb-4"),e(v,"for","password"),e(v,"class","block mb-2 text-md font-medium text-gray"),e(c,"type","password"),e(c,"name","password"),e(c,"id","password"),e(c,"placeholder","Password"),e(c,"class","w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-3xl focus:outline-none"),e(f,"class","mb-5"),e(y,"class","w-full px-3 py-3 mt-1 text-white bg-[#2ea44f] focus:outline-none font-medium rounded-3xl hover:bg-[#1e7d3f] duration-300 hover:scale-105"),e(_,"class","mt-7 mx-12"),e(o,"class","max-w-md mx-auto"),e(p,"class","container mx-auto"),e(d,"class","pb-5 flex items-center justify-center min-h-screen px-5")},m(t,g){G(t,d,g),s(d,p),s(p,o),s(o,a),s(o,C),s(o,_),s(_,n),s(n,m),s(m,u),s(m,E),s(m,r),k(r,b[0]),s(n,w),s(n,f),s(f,v),s(f,A),s(f,c),k(c,b[1]),s(n,O),s(n,y),G(t,$,g),se(x,t,g),S=!0,z||(R=[B(r,"input",b[3]),B(c,"input",b[4]),B(y,"click",b[2])],z=!0)},p(t,[g]){g&1&&r.value!==t[0]&&k(r,t[0]),g&2&&c.value!==t[1]&&k(c,t[1])},i(t){S||(re(x.$$.fragment,t),S=!0)},o(t){oe(x.$$.fragment,t),S=!1},d(t){t&&(h(d),h($)),ae(x,t),z=!1,Q(R)}}}function ge(b,d,p){let o="",a="";async function U(){return new Promise(async(n,m)=>{if(o===""||a===""){console.log("Email or password is empty"),m("Email or Password is empty");return}le.promise((async()=>{const u=ie(ce(de,"users"),ue("email","==",o)),P=await me(u);let E=!1;try{for(const r of P.docs){E=!0;const w=r.data();if(console.log("Document data:",w),w.userRole==="teacher")if(w.password===a){console.log("User is a Teacher");const f=w.UID;J.set(f);const v=localStorage.getItem("userId");fe("../Attendance"),n("Log In Successful");return}else throw console.log("Wrong Password"),new Error("Wrong Password");else throw console.log("User is not a Teacher"),new Error("User is not a Teacher")}if(!E)throw console.log("User not found"),new Error("Login failed")}catch(r){throw console.error("Error during login:",r),new Error("Login failed")}})(),{loading:"Logging In...",success:"Log In Successful",error:u=>u.message})})}X(()=>{J.subscribe(n=>{localStorage.userId=n})});function C(){o=this.value,p(0,o)}function _(){a=this.value,p(1,a)}return[o,a,U,C,_]}class xe extends Y{constructor(d){super(),Z(this,d,ge,ve,K,{})}}export{xe as component,be as universal};
