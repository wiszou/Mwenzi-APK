import{s as N,n as $,r as O,o as G}from"../chunks/scheduler.1f72109c.js";import{S as J,i as K,g as i,s as E,h as u,y as C,c as U,j as I,f as v,k as e,a as H,x as o,B as A,D as P}from"../chunks/index.b6362bb0.js";import{u as R,e as F,q as Q,w as W,c as X,f as Y,g as Z}from"../chunks/Toaster.svelte_svelte_type_style_lang.d48d9bd8.js";import{g as ee}from"../chunks/navigation.93248e48.js";function te(_){let n,b='<a href="/.."><button class=""><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-left-circle-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"></path></svg></button></a>',c,f,h,s,p,w='<a href="/.."><img src="Mwenzi5.png" class="w-64 max-w-full duration-500 hover:scale-105 hover:-translate-10" alt="..."/></a>',y,m,l,r,d,q="Student ID",M,t,T,g,j="Log In",V,k;return{c(){n=i("div"),n.innerHTML=b,c=E(),f=i("div"),h=i("div"),s=i("div"),p=i("div"),p.innerHTML=w,y=E(),m=i("div"),l=i("form"),r=i("div"),d=i("label"),d.textContent=q,M=E(),t=i("input"),T=E(),g=i("button"),g.textContent=j,this.h()},l(a){n=u(a,"DIV",{class:!0,"data-svelte-h":!0}),C(n)!=="svelte-q6mc7t"&&(n.innerHTML=b),c=U(a),f=u(a,"DIV",{class:!0});var x=I(f);h=u(x,"DIV",{class:!0});var z=I(h);s=u(z,"DIV",{class:!0});var D=I(s);p=u(D,"DIV",{class:!0,"data-svelte-h":!0}),C(p)!=="svelte-15u4pny"&&(p.innerHTML=w),y=U(D),m=u(D,"DIV",{class:!0});var B=I(m);l=u(B,"FORM",{});var L=I(l);r=u(L,"DIV",{class:!0});var S=I(r);d=u(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),C(d)!=="svelte-1na4tmz"&&(d.textContent=q),M=U(S),t=u(S,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),S.forEach(v),T=U(L),g=u(L,"BUTTON",{class:!0,"data-svelte-h":!0}),C(g)!=="svelte-jbwt1q"&&(g.textContent=j),L.forEach(v),B.forEach(v),D.forEach(v),z.forEach(v),x.forEach(v),this.h()},h(){e(n,"class","absolute ml-5 mt-4"),e(p,"class","flex justify-center"),e(d,"for","email"),e(d,"class","block mb-2 text-md font-medium text-gray"),e(t,"type","text"),t.required=!0,e(t,"name","email"),e(t,"id","email"),e(t,"placeholder","Student ID"),e(t,"class","w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-3xl focus:outline-none"),e(r,"class","mb-4"),e(g,"class","w-full px-3 py-3 text-white bg-[#2ea44f] focus:outline-none font-medium rounded-3xl hover:bg-[#1e7d3f] duration-300 hover:scale-105"),e(m,"class","m-7 mx-12"),e(s,"class","max-w-md mx-auto"),e(h,"class","container mx-auto"),e(f,"class","flex items-center justify-center min-h-screen px-5")},m(a,x){H(a,n,x),H(a,c,x),H(a,f,x),o(f,h),o(h,s),o(s,p),o(s,y),o(s,m),o(m,l),o(l,r),o(r,d),o(r,M),o(r,t),A(t,_[0]),o(l,T),o(l,g),V||(k=[P(t,"input",_[2]),P(g,"click",_[1])],V=!0)},p(a,[x]){x&1&&t.value!==a[0]&&A(t,a[0])},i:$,o:$,d(a){a&&(v(n),v(c),v(f)),V=!1,O(k)}}}function se(_,n,b){let c="";async function f(){return new Promise(async(s,p)=>{if(c==""){F.error("Student ID is empty");return}F.promise((async()=>{const w=Q(X(Y,"users"),W("studentID","==",c)),y=await Z(w);let m=!1;try{for(const l of y.docs){m=!0;const r=l.data();if(console.log("Document data:",r),r.userRole==="student"){console.log("User is a student");const d=r.studentRFID;R.set(d);const q=localStorage.getItem("userId");ee("../Student-Attendance"),s("Log In Successful");return}else throw console.log("User is not a Student"),new Error("User is not a Student")}if(!m)throw console.log("User not found"),new Error("Login failed")}catch(l){throw console.error("Error during login:",l),new Error("Login failed")}})(),{loading:"Logging In...",success:"Log In Successful",error:w=>w.message})})}G(()=>{R.subscribe(s=>{localStorage.userId=s})});function h(){c=this.value,b(0,c)}return[c,f,h]}class le extends J{constructor(n){super(),K(this,n,se,te,N,{})}}export{le as component};
