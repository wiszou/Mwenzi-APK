import{s as Vt,f as qt,r as At,o as Ut,i as Mt}from"../chunks/scheduler.542a8b70.js";import{S as $t,i as Wt,g,s as C,r as Ft,h as p,j as S,y as U,c as P,f as x,u as Yt,k as r,z as ut,a as kt,x as a,B as Nt,v as Gt,A as K,d as Jt,t as Kt,C as It,w as Qt,m as ct,n as it,o as dt,D as Xt}from"../chunks/index.def341b4.js";import{e as mt,T as Zt,u as te,s as ee,b as ae,d as le,a as ne,c as ot,q as Rt,w as bt,g as _t,p as wt,t as se,h as Bt,i as zt,f as rt,o as oe}from"../chunks/navigation.51511263.js";function Ht(i,e,v){const y=i.slice();return y[30]=e[v],y}function Ot(i,e,v){const y=i.slice();return y[33]=e[v],y}function Lt(i){let e,v=i[33].id+"",y,M,_;return{c(){e=g("option"),y=ct(v),M=C(),this.h()},l(h){e=p(h,"OPTION",{class:!0});var n=S(e);y=it(n,v),M=P(n),n.forEach(x),this.h()},h(){r(e,"class","rounded-xl"),e.__value=_=i[33].id,ut(e,e.__value)},m(h,n){kt(h,e,n),a(e,y),a(e,M)},p(h,n){n[0]&2&&v!==(v=h[33].id+"")&&dt(y,v),n[0]&2&&_!==(_=h[33].id)&&(e.__value=_,ut(e,e.__value))},d(h){h&&x(e)}}}function jt(i){let e,v,y=i[30].ranking+"",M,_,h,n=i[30].name+"",$,W,b,w=i[30].totalPoints+"",Y,z,O,D=i[30].day+"",G,F,N,L=i[30].week+"",Q,X,H,E,q,o,s,m,l,t,d;function k(){return i[10](i[30])}function A(){return i[11](i[30])}return{c(){e=g("tr"),v=g("td"),M=ct(y),_=C(),h=g("td"),$=ct(n),W=C(),b=g("td"),Y=ct(w),z=C(),O=g("td"),G=ct(D),F=C(),N=g("td"),Q=ct(L),X=C(),H=g("td"),E=g("img"),o=C(),s=g("img"),l=C(),this.h()},l(I){e=p(I,"TR",{class:!0});var f=S(e);v=p(f,"TD",{class:!0});var ht=S(v);M=it(ht,y),ht.forEach(x),_=P(f),h=p(f,"TD",{class:!0});var at=S(h);$=it(at,n),at.forEach(x),W=P(f),b=p(f,"TD",{id:!0,class:!0});var V=S(b);Y=it(V,w),V.forEach(x),z=P(f),O=p(f,"TD",{id:!0,class:!0});var ft=S(O);G=it(ft,D),ft.forEach(x),F=P(f),N=p(f,"TD",{id:!0,class:!0});var lt=S(N);Q=it(lt,L),lt.forEach(x),X=P(f),H=p(f,"TD",{class:!0});var j=S(H);E=p(j,"IMG",{src:!0,class:!0,alt:!0}),o=P(j),s=p(j,"IMG",{src:!0,class:!0,alt:!0}),j.forEach(x),l=P(f),f.forEach(x),this.h()},h(){r(v,"class","py-4 text-center"),r(h,"class","text-center"),r(b,"id","pointsDisplay1"),r(b,"class","pointsDisplay1 text-center"),r(O,"id","pointsDisplay2"),r(O,"class","pointsDisplay2 text-center"),O.hidden=!0,r(N,"id","pointsDisplay3"),r(N,"class","pointsDisplay3 text-center"),N.hidden=!0,Mt(E.src,q="minus.png")||r(E,"src",q),r(E,"class","btn btn-xs px-1 bg-transparent hover:bg-transparent border-none"),r(E,"alt","..."),Mt(s.src,m="add.png")||r(s,"src",m),r(s,"class","btn btn-xs px-1 bg-transparent hover:bg-transparent border-none"),r(s,"alt","..."),r(H,"class","text-center"),r(e,"class","bg-white border-b dark:bg-gray-800 dark:border-gray-700")},m(I,f){kt(I,e,f),a(e,v),a(v,M),a(e,_),a(e,h),a(h,$),a(e,W),a(e,b),a(b,Y),a(e,z),a(e,O),a(O,G),a(e,F),a(e,N),a(N,Q),a(e,X),a(e,H),a(H,E),a(H,o),a(H,s),a(e,l),t||(d=[K(E,"click",k),K(s,"click",A)],t=!0)},p(I,f){i=I,f[0]&4&&y!==(y=i[30].ranking+"")&&dt(M,y),f[0]&4&&n!==(n=i[30].name+"")&&dt($,n),f[0]&4&&w!==(w=i[30].totalPoints+"")&&dt(Y,w),f[0]&4&&D!==(D=i[30].day+"")&&dt(G,D),f[0]&4&&L!==(L=i[30].week+"")&&dt(Q,L)},d(I){I&&x(e),t=!1,At(d)}}}function re(i){let e,v,y='<div class="mx-6 flex flex-wrap pt-5 flex-col md:flex-row items-center"><div class="w-full flex flex-row justify-between"><nav class="flex"><img src="Mwenzi5.png" class="h-14 pb-2" alt="..."/></nav> <div class="flex flex-row"><p class="font-medium text-md my-auto mr-3" id="userName">Hi, Mwenzi Teacher</p> <button class="dropdown dropdown-end"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="green" class="bi bi-person-circle" viewBox="0 0 16 16"><path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"></path><path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"></path></svg> <ul tabindex="0" class="text-center rounded-2xl mt-2 dropdown-content shadow bg-base-100 w-24"><li class="rounded-2xl hover:bg-gray-200"><a class="py-1 flex justify-center font-medium text-sm">Log out</a></li></ul></button></div></div></div>',M,_,h,n,$="Select Class",W,b,w,Y="Total Points",z,O="Daily",D,G="Weekly",F,N,L,Q="Reset Points",X,H,E,q,o='<tr><th scope="col" class="px-6 py-4 text-left">Rank</th> <th scope="col" class="px-6 py-4 text-center">Student</th> <th scope="col" class="px-6 py-4 text-center">Points</th> <th scope="col" class="px-6 py-4 text-center">Update</th></tr>',s,m,l,t,d,k,A='<svg class="w-6 h-6 mb-1 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Attendance</span>',I,f,ht='<svg class="w-6 h-6 mb-1 text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path><path clip-rule="evenodd" fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"></path></svg> <span class="text-sm text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Points</span>',at,V,ft='<svg class="w-6 h-6 mb-1 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Notes</span>',lt,j,Tt='<svg class="w-6 h-6 mb-1 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path clip-rule="evenodd" fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Actions</span>',yt,tt,gt,xt,Dt,nt=mt(i[1]),R=[];for(let u=0;u<nt.length;u+=1)R[u]=Lt(Ot(i,nt,u));let st=mt(i[2]),B=[];for(let u=0;u<st.length;u+=1)B[u]=jt(Ht(i,st,u));return tt=new Zt({}),{c(){e=g("body"),v=g("header"),v.innerHTML=y,M=C(),_=g("div"),h=g("select"),n=g("option"),n.textContent=$;for(let u=0;u<R.length;u+=1)R[u].c();W=C(),b=g("select"),w=g("option"),w.textContent=Y,z=g("option"),z.textContent=O,D=g("option"),D.textContent=G,F=C(),N=g("div"),L=g("button"),L.textContent=Q,X=C(),H=g("div"),E=g("table"),q=g("thead"),q.innerHTML=o,s=C(),m=g("tbody");for(let u=0;u<B.length;u+=1)B[u].c();l=C(),t=g("div"),d=g("div"),k=g("button"),k.innerHTML=A,I=C(),f=g("button"),f.innerHTML=ht,at=C(),V=g("button"),V.innerHTML=ft,lt=C(),j=g("button"),j.innerHTML=Tt,yt=C(),Ft(tt.$$.fragment),this.h()},l(u){e=p(u,"BODY",{class:!0});var T=S(e);v=p(T,"HEADER",{class:!0,"data-svelte-h":!0}),U(v)!=="svelte-1wnsn1n"&&(v.innerHTML=y),M=P(T),_=p(T,"DIV",{class:!0});var c=S(_);h=p(c,"SELECT",{id:!0,class:!0});var J=S(h);n=p(J,"OPTION",{"data-svelte-h":!0}),U(n)!=="svelte-nnppqb"&&(n.textContent=$);for(let et=0;et<R.length;et+=1)R[et].l(J);J.forEach(x),W=P(c),b=p(c,"SELECT",{id:!0,class:!0});var pt=S(b);w=p(pt,"OPTION",{class:!0,"data-svelte-h":!0}),U(w)!=="svelte-10rrb4u"&&(w.textContent=Y),z=p(pt,"OPTION",{class:!0,"data-svelte-h":!0}),U(z)!=="svelte-1le78di"&&(z.textContent=O),D=p(pt,"OPTION",{class:!0,"data-svelte-h":!0}),U(D)!=="svelte-1knbarg"&&(D.textContent=G),pt.forEach(x),c.forEach(x),F=P(T),N=p(T,"DIV",{class:!0});var Et=S(N);L=p(Et,"BUTTON",{class:!0,"data-svelte-h":!0}),U(L)!=="svelte-11txb4r"&&(L.textContent=Q),Et.forEach(x),X=P(T),H=p(T,"DIV",{class:!0});var Ct=S(H);E=p(Ct,"TABLE",{class:!0});var vt=S(E);q=p(vt,"THEAD",{class:!0,"data-svelte-h":!0}),U(q)!=="svelte-w58x6w"&&(q.innerHTML=o),s=P(vt),m=p(vt,"TBODY",{});var St=S(m);for(let et=0;et<B.length;et+=1)B[et].l(St);St.forEach(x),vt.forEach(x),Ct.forEach(x),l=P(T),t=p(T,"DIV",{class:!0});var Pt=S(t);d=p(Pt,"DIV",{class:!0});var Z=S(d);k=p(Z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(k)!=="svelte-56vecb"&&(k.innerHTML=A),I=P(Z),f=p(Z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(f)!=="svelte-vg1rqy"&&(f.innerHTML=ht),at=P(Z),V=p(Z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(V)!=="svelte-1v6rxq8"&&(V.innerHTML=ft),lt=P(Z),j=p(Z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(j)!=="svelte-1oev89m"&&(j.innerHTML=Tt),Z.forEach(x),Pt.forEach(x),yt=P(T),Yt(tt.$$.fragment,T),T.forEach(x),this.h()},h(){r(v,"class","text-gray-600 body-font"),n.disabled=!0,n.selected=!0,n.__value="Select Class",ut(n,n.__value),r(h,"id","classSelection"),r(h,"class","select select-bordered font-medium focus:outline-1 w-full rounded-3xl max-w-xs"),i[0]===void 0&&qt(()=>i[8].call(h)),w.selected=!0,r(w,"class","rounded-3xl"),w.__value="Total Points",ut(w,w.__value),r(z,"class","rounded-xl"),z.__value="Daily",ut(z,z.__value),r(D,"class","rounded-xl"),D.__value="Weekly",ut(D,D.__value),r(b,"id","SortRec"),r(b,"class","w-56 h-12 font-medium text-sm rounded-3xl text-center mx-2 px-2 border border-gray-300 focus:outline-1 focus:outline-gray-300"),r(_,"class","flex justify-center mt-4 mx-6"),r(L,"class","bg-red-500 rounded-3xl text-sm text-white w-24 h-6"),r(N,"class","mt-6 flex w-full justify-start pl-6"),r(q,"class","text-xs text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0"),r(E,"class","text-sm text-gray-500 dark:text-gray-400 w-full rounded-lg shadow-sm"),r(H,"class","mt-2 px-4 items-center text-center h-3/4 overflow-y-auto"),r(k,"type","button"),r(k,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),r(f,"type","button"),r(f,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),r(V,"type","button"),r(V,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),r(j,"type","button"),r(j,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),r(d,"class","grid h-full max-w-lg grid-cols-4 mx-auto font-medium"),r(t,"class","fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600"),r(e,"class","bg-gray-50 h-screen")},m(u,T){kt(u,e,T),a(e,v),a(e,M),a(e,_),a(_,h),a(h,n);for(let c=0;c<R.length;c+=1)R[c]&&R[c].m(h,null);Nt(h,i[0],!0),a(_,W),a(_,b),a(b,w),a(b,z),a(b,D),a(e,F),a(e,N),a(N,L),a(e,X),a(e,H),a(H,E),a(E,q),a(E,s),a(E,m);for(let c=0;c<B.length;c+=1)B[c]&&B[c].m(m,null);a(e,l),a(e,t),a(t,d),a(d,k),a(d,I),a(d,f),a(d,at),a(d,V),a(d,lt),a(d,j),a(e,yt),Gt(tt,e,null),gt=!0,xt||(Dt=[K(h,"change",i[8]),K(h,"change",i[9]),K(b,"change",i[7]),K(L,"click",i[4]),K(k,"click",i[12]),K(V,"click",i[13]),K(j,"click",i[14])],xt=!0)},p(u,T){if(T[0]&2){nt=mt(u[1]);let c;for(c=0;c<nt.length;c+=1){const J=Ot(u,nt,c);R[c]?R[c].p(J,T):(R[c]=Lt(J),R[c].c(),R[c].m(h,null))}for(;c<R.length;c+=1)R[c].d(1);R.length=nt.length}if(T[0]&3&&Nt(h,u[0]),T[0]&36){st=mt(u[2]);let c;for(c=0;c<st.length;c+=1){const J=Ht(u,st,c);B[c]?B[c].p(J,T):(B[c]=jt(J),B[c].c(),B[c].m(m,null))}for(;c<B.length;c+=1)B[c].d(1);B.length=st.length}},i(u){gt||(Jt(tt.$$.fragment,u),gt=!0)},o(u){Kt(tt.$$.fragment,u),gt=!1},d(u){u&&x(e),It(R,u),It(B,u),Qt(tt),xt=!1,At(Dt)}}}function ce(i,e,v){function y(o){ne(o)}let M="",_,h=[],n=[],$;async function W(){const o=ot(rt,"Subject"),s=Rt(o,bt("teacherID","==",M)),m=await _t(s);v(1,h=m.docs.map(l=>({id:l.id,data:l.data()})))}async function b(){const o=ot(rt,"Subject",`${_}`,"Recitation");(await _t(o)).forEach(async m=>{const l=m.ref;await wt(l,{totalPoints:0,day:null,week:null})}),se.success("Points reset successfully.")}async function w(){const o=document.getElementById("SortRec").value,s=ot(rt,"Subject",`${_}`,"Recitation");return oe(s,m=>{v(2,n=[]),m.forEach(l=>{const t=l.data(),d=l.id,k=t.totalPoints,A=t.week||0,I=t.day||0,f={id:d,totalPoints:k,week:A,day:I};n.push(f)}),o=="Total Points"?(n.sort((l,t)=>t.totalPoints-l.totalPoints),n.forEach((l,t)=>{l.ranking=t+1}),console.log("Updated recitation array with ranking:",n),console.log("recitation array:",n)):o=="Weekly"?(n.sort((l,t)=>t.week-l.week),n.forEach((l,t)=>{l.ranking=t+1})):o=="Daily"&&(n.sort((l,t)=>t.day-l.day),n.forEach((l,t)=>{l.ranking=t+1})),Y()})}async function Y(){const o=ot(rt,"users"),s=n.map(l=>l.id);(await _t(o,bt("studentRFID","in",s))).forEach(l=>{const t=l.data().studentRFID,d=l.data().firstName+" "+l.data().lastName,k=n.find(A=>A.id===t);k&&(k.name=d)}),v(2,n)}function z(){fetch("https://worldtimeapi.org/api/timezone/Asia/Manila").then(o=>o.json()).then(o=>{var s=new Date(o.datetime),m=s.getFullYear(),l=s.getMonth()+1,t=s.getDate();$=m+"-"+l.toString().padStart(2,"0")+"-"+t.toString().padStart(2,"0"),console.log($)}).catch(o=>{console.log("Error:",o)})}async function O(o,s){const m=ot(rt,"Subject",`${_}`,"Recitation");if(o==="minus"){const l=Bt(m,s),t=await zt(l);if(t.exists()){const d=t.data(),k=d.totalPoints-1,A=d.week-1,I=d.day-1;await wt(l,{totalPoints:k,week:A,day:I}),console.log("Minus button clicked for document ID:",s)}}else if(o==="add"){const l=Bt(m,s),t=await zt(l);if(t.exists()){const d=t.data(),k=d.totalPoints+1,A=d.week+1,I=d.day+1;await wt(l,{totalPoints:k,week:A,day:I}),console.log("Minus button clicked for document ID:",s)}console.log("Add button clicked for document ID:",s)}}async function D(){console.log(_),W(),w(),F()}async function G(o){const s=ot(rt,"users"),m=Rt(s,bt("UID","==",o)),l=await _t(m);if(l.docs.length>0){const t=l.docs[0];console.log(t.data().Name),document.getElementById("userName").textContent=t.data().firstName+" "+t.data().lastName}else return"Teacher not found"}async function F(){console.log("haha");const o=document.getElementById("SortRec").value,s=document.getElementsByClassName("pointsDisplay1"),m=document.getElementsByClassName("pointsDisplay2"),l=document.getElementsByClassName("pointsDisplay3");if(o==="Total Points"){for(let t=0;t<s.length;t++)s[t].hidden=!1;for(let t=0;t<m.length;t++)m[t].hidden=!0;for(let t=0;t<l.length;t++)l[t].hidden=!0;n.sort((t,d)=>d.totalPoints-t.totalPoints),n.forEach((t,d)=>{t.ranking=d+1})}if(o==="Weekly"){for(let t=0;t<s.length;t++)s[t].hidden=!0;for(let t=0;t<m.length;t++)m[t].hidden=!0;for(let t=0;t<l.length;t++)l[t].hidden=!1;n.sort((t,d)=>d.week-t.week),n.forEach((t,d)=>{t.ranking=d+1})}if(o==="Daily"){for(let t=0;t<s.length;t++)s[t].hidden=!0;for(let t=0;t<m.length;t++)m[t].hidden=!1;for(let t=0;t<l.length;t++)l[t].hidden=!0;n.sort((t,d)=>d.day-t.day),n.forEach((t,d)=>{t.ranking=d+1})}w()}Ut(()=>{const o=te.subscribe(s=>(M=localStorage.getItem("userId"),console.log(M),G(M),W(),()=>{o()}));ee.subscribe(s=>{typeof localStorage<"u"&&(localStorage.subjectSelected1=s)}),ae.subscribe(s=>{typeof localStorage<"u"&&(localStorage.timeFrom=s)}),le.subscribe(s=>{typeof localStorage<"u"&&(localStorage.timeTo=s)})}),z();function N(){_=Xt(this),v(0,_),v(1,h)}return[_,h,n,y,b,O,D,F,N,o=>{D()},o=>O("minus",o.id),o=>O("add",o.id),o=>y("/Attendance"),o=>y("/Notes"),o=>y("/Actions")]}class he extends $t{constructor(e){super(),Wt(this,e,ce,re,Vt,{},null,[-1,-1])}}export{he as component};
