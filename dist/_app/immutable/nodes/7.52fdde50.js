import{s as Be,f as Re,r as Ne,o as je,i as Ee}from"../chunks/scheduler.1f72109c.js";import{S as Oe,i as ze,g as r,s as b,z as le,r as He,h as c,j as p,y as B,c as y,A as se,f as g,u as Ve,k as a,B as It,a as re,x as e,C as Ce,v as qe,D as Z,d as Ue,t as $e,E as Te,w as Fe,m as Pt,n as At,o as St,F as We}from"../chunks/index.b6362bb0.js";import{e as qt,T as Ye}from"../chunks/Toaster.6d89360e.js";import{u as Ze,s as Ge,t as Je,a as Ke,c as Tt,q as De,w as ne,g as Ut,f as Dt,m as oe,e as Mt,d as Pe,b as Ae,o as Qe}from"../chunks/Toaster.svelte_svelte_type_style_lang.d48d9bd8.js";import{g as Xe}from"../chunks/navigation.93248e48.js";function Se(i,s,_){const m=i.slice();return m[32]=s[_],m}function Ie(i,s,_){const m=i.slice();return m[35]=s[_],m}function Le(i){let s,_=i[35].id+"",m,E,w;return{c(){s=r("option"),m=Pt(_),E=b(),this.h()},l(C){s=c(C,"OPTION",{class:!0});var d=p(s);m=At(d,_),E=y(d),d.forEach(g),this.h()},h(){a(s,"class","rounded-xl"),s.__value=w=i[35].id,It(s,s.__value)},m(C,d){re(C,s,d),e(s,m),e(s,E)},p(C,d){d[0]&2&&_!==(_=C[35].id+"")&&St(m,_),d[0]&2&&w!==(w=C[35].id)&&(s.__value=w,It(s,s.__value))},d(C){C&&g(s)}}}function Me(i){let s,_,m=i[32].ranking+"",E,w,C,d=i[32].name+"",R,O,F,W=i[32].totalPoints+"",z,A,S,H=i[32].day+"",G,q,L,j=i[32].week+"",lt,st,I,k,V,ht,U,n,o,x,l;function t(){return i[11](i[32])}function h(){return i[12](i[32])}return{c(){s=r("tr"),_=r("td"),E=Pt(m),w=b(),C=r("td"),R=Pt(d),O=b(),F=r("td"),z=Pt(W),A=b(),S=r("td"),G=Pt(H),q=b(),L=r("td"),lt=Pt(j),st=b(),I=r("td"),k=r("img"),ht=b(),U=r("img"),o=b(),this.h()},l(D){s=c(D,"TR",{class:!0});var v=p(s);_=c(v,"TD",{class:!0});var P=p(_);E=At(P,m),P.forEach(g),w=y(v),C=c(v,"TD",{class:!0});var $=p(C);R=At($,d),$.forEach(g),O=y(v),F=c(v,"TD",{id:!0,class:!0});var Lt=p(F);z=At(Lt,W),Lt.forEach(g),A=y(v),S=c(v,"TD",{id:!0,class:!0});var _t=p(S);G=At(_t,H),_t.forEach(g),q=y(v),L=c(v,"TD",{id:!0,class:!0});var K=p(L);lt=At(K,j),K.forEach(g),st=y(v),I=c(v,"TD",{class:!0});var nt=p(I);k=c(nt,"IMG",{src:!0,class:!0,alt:!0}),ht=y(nt),U=c(nt,"IMG",{src:!0,class:!0,alt:!0}),nt.forEach(g),o=y(v),v.forEach(g),this.h()},h(){a(_,"class","py-4 text-center"),a(C,"class","text-center"),a(F,"id","pointsDisplay1"),a(F,"class","pointsDisplay1 text-center"),a(S,"id","pointsDisplay2"),a(S,"class","pointsDisplay2 text-center"),S.hidden=!0,a(L,"id","pointsDisplay3"),a(L,"class","pointsDisplay3 text-center"),L.hidden=!0,Ee(k.src,V="minus.png")||a(k,"src",V),a(k,"class","btn btn-xs px-1 bg-transparent hover:bg-transparent border-none"),a(k,"alt","..."),Ee(U.src,n="add.png")||a(U,"src",n),a(U,"class","btn btn-xs px-1 bg-transparent hover:bg-transparent border-none"),a(U,"alt","..."),a(I,"class","text-center"),a(s,"class","bg-white border-b dark:bg-gray-800 dark:border-gray-700")},m(D,v){re(D,s,v),e(s,_),e(_,E),e(s,w),e(s,C),e(C,R),e(s,O),e(s,F),e(F,z),e(s,A),e(s,S),e(S,G),e(s,q),e(s,L),e(L,lt),e(s,st),e(s,I),e(I,k),e(I,ht),e(I,U),e(s,o),x||(l=[Z(k,"click",t),Z(U,"click",h)],x=!0)},p(D,v){i=D,v[0]&4&&m!==(m=i[32].ranking+"")&&St(E,m),v[0]&4&&d!==(d=i[32].name+"")&&St(R,d),v[0]&4&&W!==(W=i[32].totalPoints+"")&&St(z,W),v[0]&4&&H!==(H=i[32].day+"")&&St(G,H),v[0]&4&&j!==(j=i[32].week+"")&&St(lt,j)},d(D){D&&g(s),x=!1,Ne(l)}}}function ta(i){let s,_,m,E,w,C='<img src="Mwenzi5.png" class="h-14 pb-2" alt="..."/>',d,R,O,F="Hi, Mwenzi Teacher",W,z,A,S,H,G,q,L,j,lt="Log out",st,I,k,V,ht="Select Class",U,n,o,x="Total Points",l,t="Daily",h,D="Weekly",v,P,$,Lt="Reset Points",_t,K,nt,xt,J,ot,ce="âœ•",$t,ft,ie="Are you sure to reset all points?",Ft,rt,Q,de="Yes",Wt,ct,ue="No",Yt,bt,it,gt,he='<tr><th scope="col" class="px-6 py-4 text-center">Rank</th> <th scope="col" class="px-6 py-4 text-center">Student</th> <th scope="col" class="px-6 py-4 text-center">Points</th> <th scope="col" class="px-6 py-4 text-center">Update</th></tr>',Zt,yt,Gt,vt,Y,X,fe='<svg xmlns="http://www.w3.org/2000/svg" width="27" height="28" fill="currentColor" class="bi bi-person-fill-check text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path d="M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Attendance</span>',Jt,tt,ge='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" fill="currentColor" class="bi bi-award-fill text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"></path><path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"></path></svg> <span class="text-sm text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Points</span>',Kt,et,ve='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="28" fill="currentColor" class="bi bi-sticky-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 17 17"><path d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1h-11zm6 8.5a1 1 0 0 1 1-1h4.396a.25.25 0 0 1 .177.427l-5.146 5.146a.25.25 0 0 1-.427-.177V9.5z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Notes</span>',Qt,at,pe='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" fill="currentColor" class="bi bi-grid-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 17 17"><path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Actions</span>',Xt,pt,Nt,te,me,wt=qt(i[1]),M=[];for(let f=0;f<wt.length;f+=1)M[f]=Le(Ie(i,wt,f));let kt=qt(i[2]),N=[];for(let f=0;f<kt.length;f+=1)N[f]=Me(Se(i,kt,f));return pt=new Ye({}),{c(){s=r("body"),_=r("header"),m=r("div"),E=r("div"),w=r("nav"),w.innerHTML=C,d=b(),R=r("div"),O=r("p"),O.textContent=F,W=b(),z=r("button"),A=le("svg"),S=le("path"),H=le("path"),G=b(),q=r("ul"),L=r("li"),j=r("a"),j.textContent=lt,st=b(),I=r("div"),k=r("select"),V=r("option"),V.textContent=ht;for(let f=0;f<M.length;f+=1)M[f].c();U=b(),n=r("select"),o=r("option"),o.textContent=x,l=r("option"),l.textContent=t,h=r("option"),h.textContent=D,v=b(),P=r("div"),$=r("label"),$.textContent=Lt,_t=b(),K=r("input"),nt=b(),xt=r("div"),J=r("div"),ot=r("label"),ot.textContent=ce,$t=b(),ft=r("h3"),ft.textContent=ie,Ft=b(),rt=r("div"),Q=r("button"),Q.textContent=de,Wt=b(),ct=r("label"),ct.textContent=ue,Yt=b(),bt=r("div"),it=r("table"),gt=r("thead"),gt.innerHTML=he,Zt=b(),yt=r("tbody");for(let f=0;f<N.length;f+=1)N[f].c();Gt=b(),vt=r("div"),Y=r("div"),X=r("button"),X.innerHTML=fe,Jt=b(),tt=r("button"),tt.innerHTML=ge,Kt=b(),et=r("button"),et.innerHTML=ve,Qt=b(),at=r("button"),at.innerHTML=pe,Xt=b(),He(pt.$$.fragment),this.h()},l(f){s=c(f,"BODY",{class:!0});var T=p(s);_=c(T,"HEADER",{class:!0});var u=p(_);m=c(u,"DIV",{class:!0});var dt=p(m);E=c(dt,"DIV",{class:!0});var Bt=p(E);w=c(Bt,"NAV",{class:!0,"data-svelte-h":!0}),B(w)!=="svelte-1njl2ha"&&(w.innerHTML=C),d=y(Bt),R=c(Bt,"DIV",{class:!0});var Rt=p(R);O=c(Rt,"P",{class:!0,id:!0,"data-svelte-h":!0}),B(O)!=="svelte-kjnun9"&&(O.textContent=F),W=y(Rt),z=c(Rt,"BUTTON",{class:!0});var jt=p(z);A=se(jt,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var ee=p(A);S=se(ee,"path",{d:!0}),p(S).forEach(g),H=se(ee,"path",{"fill-rule":!0,d:!0}),p(H).forEach(g),ee.forEach(g),G=y(jt),q=c(jt,"UL",{tabindex:!0,class:!0});var _e=p(q);L=c(_e,"LI",{class:!0});var xe=p(L);j=c(xe,"A",{class:!0,"data-svelte-h":!0}),B(j)!=="svelte-ajmpfp"&&(j.textContent=lt),xe.forEach(g),_e.forEach(g),jt.forEach(g),Rt.forEach(g),Bt.forEach(g),dt.forEach(g),u.forEach(g),st=y(T),I=c(T,"DIV",{class:!0});var Ot=p(I);k=c(Ot,"SELECT",{id:!0,class:!0});var ae=p(k);V=c(ae,"OPTION",{"data-svelte-h":!0}),B(V)!=="svelte-nnppqb"&&(V.textContent=ht);for(let mt=0;mt<M.length;mt+=1)M[mt].l(ae);ae.forEach(g),U=y(Ot),n=c(Ot,"SELECT",{id:!0,class:!0});var zt=p(n);o=c(zt,"OPTION",{class:!0,"data-svelte-h":!0}),B(o)!=="svelte-10rrb4u"&&(o.textContent=x),l=c(zt,"OPTION",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1le78di"&&(l.textContent=t),h=c(zt,"OPTION",{class:!0,"data-svelte-h":!0}),B(h)!=="svelte-1knbarg"&&(h.textContent=D),zt.forEach(g),Ot.forEach(g),v=y(T),P=c(T,"DIV",{class:!0});var Et=p(P);$=c(Et,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B($)!=="svelte-18edy1e"&&($.textContent=Lt),_t=y(Et),K=c(Et,"INPUT",{type:!0,id:!0,class:!0}),nt=y(Et),xt=c(Et,"DIV",{class:!0});var be=p(xt);J=c(be,"DIV",{class:!0});var Ct=p(J);ot=c(Ct,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(ot)!=="svelte-1ersbct"&&(ot.textContent=ce),$t=y(Ct),ft=c(Ct,"H3",{class:!0,"data-svelte-h":!0}),B(ft)!=="svelte-1l74v8z"&&(ft.textContent=ie),Ft=y(Ct),rt=c(Ct,"DIV",{class:!0});var Ht=p(rt);Q=c(Ht,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),B(Q)!=="svelte-gybtrc"&&(Q.textContent=de),Wt=y(Ht),ct=c(Ht,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(ct)!=="svelte-mpxpcw"&&(ct.textContent=ue),Ht.forEach(g),Ct.forEach(g),be.forEach(g),Et.forEach(g),Yt=y(T),bt=c(T,"DIV",{class:!0});var ye=p(bt);it=c(ye,"TABLE",{class:!0});var Vt=p(it);gt=c(Vt,"THEAD",{class:!0,"data-svelte-h":!0}),B(gt)!=="svelte-1cz47fg"&&(gt.innerHTML=he),Zt=y(Vt),yt=c(Vt,"TBODY",{});var we=p(yt);for(let mt=0;mt<N.length;mt+=1)N[mt].l(we);we.forEach(g),Vt.forEach(g),ye.forEach(g),Gt=y(T),vt=c(T,"DIV",{id:!0,class:!0});var ke=p(vt);Y=c(ke,"DIV",{class:!0});var ut=p(Y);X=c(ut,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(X)!=="svelte-1p8q7iv"&&(X.innerHTML=fe),Jt=y(ut),tt=c(ut,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(tt)!=="svelte-1s6zy76"&&(tt.innerHTML=ge),Kt=y(ut),et=c(ut,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(et)!=="svelte-1nxhnyv"&&(et.innerHTML=ve),Qt=y(ut),at=c(ut,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(at)!=="svelte-15uwffe"&&(at.innerHTML=pe),ut.forEach(g),ke.forEach(g),Xt=y(T),Ve(pt.$$.fragment,T),T.forEach(g),this.h()},h(){a(w,"class","flex"),a(O,"class","font-medium text-md my-auto mr-3"),a(O,"id","userName"),a(S,"d","M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"),a(H,"fill-rule","evenodd"),a(H,"d","M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"),a(A,"xmlns","http://www.w3.org/2000/svg"),a(A,"width","28"),a(A,"height","28"),a(A,"fill","green"),a(A,"class","bi bi-person-circle"),a(A,"viewBox","0 0 16 16"),a(j,"class","py-1 flex justify-center font-medium text-sm"),a(L,"class","rounded-2xl hover:bg-gray-200"),a(q,"tabindex","0"),a(q,"class","text-center rounded-2xl mt-2 dropdown-content shadow bg-base-100 w-24"),a(z,"class","dropdown dropdown-end"),a(R,"class","flex flex-row"),a(E,"class","w-full flex flex-row justify-between"),a(m,"class","mx-6 flex flex-wrap pt-5 flex-col md:flex-row items-center"),a(_,"class","text-gray-600 body-font view-transition-name: header; svelte-j4wpf5"),V.disabled=!0,V.selected=!0,V.__value="Select Class",It(V,V.__value),a(k,"id","classSelection"),a(k,"class","select select-bordered font-medium focus:outline-1 w-full rounded-3xl max-w-xs"),i[0]===void 0&&Re(()=>i[9].call(k)),o.selected=!0,a(o,"class","rounded-3xl"),o.__value="Total Points",It(o,o.__value),a(l,"class","rounded-xl"),l.__value="Daily",It(l,l.__value),a(h,"class","rounded-xl"),h.__value="Weekly",It(h,h.__value),a(n,"id","SortRec"),a(n,"class","bg-white w-56 h-12 font-medium text-sm rounded-3xl text-center mx-2 px-2 border border-gray-300 focus:outline-1 focus:outline-gray-300"),a(I,"class","flex justify-center mt-4 mx-6"),a($,"for","reset"),a($,"class","bg-red-500 rounded-3xl text-sm text-white w-32 h-7 text-center font-medium pt-1"),a(K,"type","checkbox"),a(K,"id","reset"),a(K,"class","modal-toggle"),a(ot,"for","reset"),a(ot,"class","btn btn-sm btn-circle absolute right-2 top-2"),a(ft,"class","text-lg font-bold text-center mt-4"),a(Q,"id","yesButton"),a(Q,"class","bg-red-500 rounded-3xl mx-2 w-20 text-white px-4 font-medium"),a(ct,"for","reset"),a(ct,"class","bg-gray-200 rounded-3xl w-20 text-black font-medium text-center px-4 mx-2"),a(rt,"class","mt-6 mb-1 flex justify-center"),a(J,"class","modal-box relative h-36"),a(xt,"class","modal"),a(P,"class","mt-6 mb-3 flex w-full justify-center"),a(gt,"class","text-xs text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0"),a(it,"class","text-sm text-gray-500 dark:text-gray-400 w-full rounded-lg shadow-sm"),a(bt,"class","mt-2 px-4 items-center text-center h-3/4 overflow-y-auto"),a(X,"type","button"),a(X,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),a(tt,"type","button"),a(tt,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),a(et,"type","button"),a(et,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),a(at,"type","button"),a(at,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),a(Y,"class","grid h-full max-w-lg grid-cols-4 mx-auto font-medium"),a(vt,"id","bottomnav"),a(vt,"class","fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600 svelte-j4wpf5"),a(s,"class","h-screen")},m(f,T){re(f,s,T),e(s,_),e(_,m),e(m,E),e(E,w),e(E,d),e(E,R),e(R,O),e(R,W),e(R,z),e(z,A),e(A,S),e(A,H),e(z,G),e(z,q),e(q,L),e(L,j),e(s,st),e(s,I),e(I,k),e(k,V);for(let u=0;u<M.length;u+=1)M[u]&&M[u].m(k,null);Ce(k,i[0],!0),e(I,U),e(I,n),e(n,o),e(n,l),e(n,h),e(s,v),e(s,P),e(P,$),e(P,_t),e(P,K),e(P,nt),e(P,xt),e(xt,J),e(J,ot),e(J,$t),e(J,ft),e(J,Ft),e(J,rt),e(rt,Q),e(rt,Wt),e(rt,ct),e(s,Yt),e(s,bt),e(bt,it),e(it,gt),e(it,Zt),e(it,yt);for(let u=0;u<N.length;u+=1)N[u]&&N[u].m(yt,null);e(s,Gt),e(s,vt),e(vt,Y),e(Y,X),e(Y,Jt),e(Y,tt),e(Y,Kt),e(Y,et),e(Y,Qt),e(Y,at),e(s,Xt),qe(pt,s,null),Nt=!0,te||(me=[Z(j,"click",i[8]),Z(k,"change",i[9]),Z(k,"change",i[10]),Z(n,"change",i[7]),Z(Q,"click",i[4]),Z(X,"click",i[13]),Z(tt,"click",i[14]),Z(et,"click",i[15]),Z(at,"click",i[16])],te=!0)},p(f,T){if(T[0]&2){wt=qt(f[1]);let u;for(u=0;u<wt.length;u+=1){const dt=Ie(f,wt,u);M[u]?M[u].p(dt,T):(M[u]=Le(dt),M[u].c(),M[u].m(k,null))}for(;u<M.length;u+=1)M[u].d(1);M.length=wt.length}if(T[0]&3&&Ce(k,f[0]),T[0]&36){kt=qt(f[2]);let u;for(u=0;u<kt.length;u+=1){const dt=Se(f,kt,u);N[u]?N[u].p(dt,T):(N[u]=Me(dt),N[u].c(),N[u].m(yt,null))}for(;u<N.length;u+=1)N[u].d(1);N.length=kt.length}},i(f){Nt||(Ue(pt.$$.fragment,f),Nt=!0)},o(f){$e(pt.$$.fragment,f),Nt=!1},d(f){f&&g(s),Te(M,f),Te(N,f),Fe(pt),te=!1,Ne(me)}}}function ea(i,s,_){function m(n){Xe(n)}let E="",w,C=[],d=[],R;async function O(){const n=Tt(Dt,"Subject"),o=De(n,ne("teacherID","==",E)),x=await Ut(o);_(1,C=x.docs.map(l=>({id:l.id,data:l.data()})))}async function F(){if(w==="Select Class"){Mt.error("Please select a class");return}try{const n=Tt(Dt,"Subject",`${w}`,"Recitation");(await Ut(n)).forEach(async x=>{try{const l=x.ref;await oe(l,{totalPoints:0,day:null,week:null}),Mt.success("Points reset successfully.")}catch(l){console.error("Error updating document:",l),Mt.error("Error resetting points. Please try again.")}})}catch(n){console.error("Error fetching documents:",n),Mt.error("Error fetching recitation documents. Please try again.")}}async function W(){const n=document.getElementById("SortRec").value,o=Tt(Dt,"Subject",`${w}`,"Recitation");return Qe(o,x=>{_(2,d=[]),x.forEach(l=>{const t=l.data(),h=l.id,D=t.totalPoints,v=t.week||0,P=t.day||0,$={id:h,totalPoints:D,week:v,day:P};d.push($)}),n=="Total Points"?(d.sort((l,t)=>t.totalPoints-l.totalPoints),d.forEach((l,t)=>{l.ranking=t+1}),console.log("Updated recitation array with ranking:",d),console.log("recitation array:",d)):n=="Weekly"?(d.sort((l,t)=>t.week-l.week),d.forEach((l,t)=>{l.ranking=t+1})):n=="Daily"&&(d.sort((l,t)=>t.day-l.day),d.forEach((l,t)=>{l.ranking=t+1})),z()})}async function z(){const n=Tt(Dt,"users"),o=d.map(l=>l.id);(await Ut(n,ne("studentRFID","in",o))).forEach(l=>{const t=l.data().studentRFID,h=l.data().firstName+" "+l.data().lastName,D=d.find(v=>v.id===t);D&&(D.name=h)}),_(2,d)}function A(){fetch("https://worldtimeapi.org/api/timezone/Asia/Manila").then(n=>n.json()).then(n=>{var o=new Date(n.datetime),x=o.getFullYear(),l=o.getMonth()+1,t=o.getDate();R=x+"-"+l.toString().padStart(2,"0")+"-"+t.toString().padStart(2,"0"),console.log(R)}).catch(n=>{console.log("Error:",n)})}async function S(n,o){const x=Tt(Dt,"Subject",`${w}`,"Recitation");if(n==="minus"){const l=Pe(x,o),t=await Ae(l);if(t.exists()){const h=t.data(),D=h.totalPoints-1,v=h.week-1,P=h.day-1;await oe(l,{totalPoints:D,week:v,day:P}),console.log("Minus button clicked for document ID:",o)}}else if(n==="add"){const l=Pe(x,o),t=await Ae(l);if(t.exists()){const h=t.data(),D=h.totalPoints+1,v=h.week+1,P=h.day+1;await oe(l,{totalPoints:D,week:v,day:P}),console.log("Minus button clicked for document ID:",o)}console.log("Add button clicked for document ID:",o)}Mt.success("Updated student points")}async function H(){console.log(w),O(),W(),q()}async function G(n){const o=Tt(Dt,"users"),x=De(o,ne("UID","==",n)),l=await Ut(x);if(l.docs.length>0){const t=l.docs[0];console.log(t.data().Name),document.getElementById("userName").textContent=t.data().firstName+" "+t.data().lastName}else return"Teacher not found"}async function q(){console.log("haha");const n=document.getElementById("SortRec").value,o=document.getElementsByClassName("pointsDisplay1"),x=document.getElementsByClassName("pointsDisplay2"),l=document.getElementsByClassName("pointsDisplay3");if(n==="Total Points"){for(let t=0;t<o.length;t++)o[t].hidden=!1;for(let t=0;t<x.length;t++)x[t].hidden=!0;for(let t=0;t<l.length;t++)l[t].hidden=!0;d.sort((t,h)=>h.totalPoints-t.totalPoints),d.forEach((t,h)=>{t.ranking=h+1})}if(n==="Weekly"){for(let t=0;t<o.length;t++)o[t].hidden=!0;for(let t=0;t<x.length;t++)x[t].hidden=!0;for(let t=0;t<l.length;t++)l[t].hidden=!1;d.sort((t,h)=>h.week-t.week),d.forEach((t,h)=>{t.ranking=h+1})}if(n==="Daily"){for(let t=0;t<o.length;t++)o[t].hidden=!0;for(let t=0;t<x.length;t++)x[t].hidden=!1;for(let t=0;t<l.length;t++)l[t].hidden=!0;d.sort((t,h)=>h.day-t.day),d.forEach((t,h)=>{t.ranking=h+1})}W()}je(()=>{const n=Ze.subscribe(o=>(E=localStorage.getItem("userId"),console.log(E),G(E),O(),()=>{n()}));Ge.subscribe(o=>{typeof localStorage<"u"&&(localStorage.subjectSelected1=o)}),Je.subscribe(o=>{typeof localStorage<"u"&&(localStorage.timeFrom=o)}),Ke.subscribe(o=>{typeof localStorage<"u"&&(localStorage.timeTo=o)})}),A();const L=n=>m("/Teacher-Login");function j(){w=We(this),_(0,w),_(1,C)}return[w,C,d,m,F,S,H,q,L,j,n=>{H()},n=>S("minus",n.id),n=>S("add",n.id),n=>m("/Attendance"),n=>m("/Points"),n=>m("/Notes"),n=>m("/Actions")]}class ra extends Oe{constructor(s){super(),ze(this,s,ea,ta,Be,{},null,[-1,-1])}}export{ra as component};
