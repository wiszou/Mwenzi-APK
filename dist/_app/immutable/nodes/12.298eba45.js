import{s as K,r as Q,o as X}from"../chunks/scheduler.1f72109c.js";import{S as Y,i as Z,g as l,s as L,r as ee,h as i,j as I,y as j,c as C,f as g,u as te,k as e,a as G,x as s,B as k,v as se,D as N,d as re,t as oe,w as ae}from"../chunks/index.b6362bb0.js";import{u as J,e as ne,q as le,w as ie,c as ue,f as ce,g as de}from"../chunks/Toaster.svelte_svelte_type_style_lang.9536831a.js";import{T as fe}from"../chunks/Toaster.44b2d701.js";import{g as me}from"../chunks/navigation.4854b6b4.js";function pe(x){let d,p,o,a,U='<a href="/.."><img src="Mwenzi5.png" class="w-64 duration-500 hover:scale-105 hover:-translate-10" alt="..."/></a>',T,w,n,f,u,$="Email",E,r,_,m,h,H="Password",B,c,z,y,O="Log In",P,b,S,A,R;return b=new fe({}),{c(){d=l("div"),p=l("div"),o=l("div"),a=l("div"),a.innerHTML=U,T=L(),w=l("div"),n=l("form"),f=l("div"),u=l("label"),u.textContent=$,E=L(),r=l("input"),_=L(),m=l("div"),h=l("label"),h.textContent=H,B=L(),c=l("input"),z=L(),y=l("button"),y.textContent=O,P=L(),ee(b.$$.fragment),this.h()},l(t){d=i(t,"DIV",{class:!0});var v=I(d);p=i(v,"DIV",{class:!0});var W=I(p);o=i(W,"DIV",{class:!0});var V=I(o);a=i(V,"DIV",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-1luhezu"&&(a.innerHTML=U),T=C(V),w=i(V,"DIV",{class:!0});var F=I(w);n=i(F,"FORM",{});var D=I(n);f=i(D,"DIV",{class:!0});var q=I(f);u=i(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(u)!=="svelte-onvlzj"&&(u.textContent=$),E=C(q),r=i(q,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),q.forEach(g),_=C(D),m=i(D,"DIV",{class:!0});var M=I(m);h=i(M,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(h)!=="svelte-1x6bsft"&&(h.textContent=H),B=C(M),c=i(M,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),M.forEach(g),z=C(D),y=i(D,"BUTTON",{class:!0,"data-svelte-h":!0}),j(y)!=="svelte-wdapb1"&&(y.textContent=O),D.forEach(g),F.forEach(g),V.forEach(g),W.forEach(g),v.forEach(g),P=C(t),te(b.$$.fragment,t),this.h()},h(){e(a,"class","flex justify-center"),e(u,"for","email"),e(u,"class","block mb-2 text-md font-medium text-gray"),e(r,"type","email"),e(r,"name","email"),e(r,"id","email"),e(r,"placeholder","Email"),e(r,"class","w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-3xl focus:outline-none"),e(f,"class","mb-4"),e(h,"for","password"),e(h,"class","block mb-2 text-md font-medium text-gray"),e(c,"type","password"),e(c,"name","password"),e(c,"id","password"),e(c,"placeholder","Password"),e(c,"class","w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-3xl focus:outline-none"),e(m,"class","mb-5"),e(y,"class","w-full px-3 py-3 mt-1 text-white bg-[#2ea44f] focus:outline-none font-medium rounded-3xl hover:bg-[#1e7d3f] duration-300 hover:scale-105"),e(w,"class","mt-7 mx-12"),e(o,"class","max-w-md mx-auto"),e(p,"class","container mx-auto"),e(d,"class","pb-5 flex items-center justify-center min-h-screen px-5")},m(t,v){G(t,d,v),s(d,p),s(p,o),s(o,a),s(o,T),s(o,w),s(w,n),s(n,f),s(f,u),s(f,E),s(f,r),k(r,x[0]),s(n,_),s(n,m),s(m,h),s(m,B),s(m,c),k(c,x[1]),s(n,z),s(n,y),G(t,P,v),se(b,t,v),S=!0,A||(R=[N(r,"input",x[3]),N(c,"input",x[4]),N(y,"click",x[2])],A=!0)},p(t,[v]){v&1&&r.value!==t[0]&&k(r,t[0]),v&2&&c.value!==t[1]&&k(c,t[1])},i(t){S||(re(b.$$.fragment,t),S=!0)},o(t){oe(b.$$.fragment,t),S=!1},d(t){t&&(g(d),g(P)),ae(b,t),A=!1,Q(R)}}}function he(x,d,p){let o="",a="";async function U(){return new Promise(async(n,f)=>{if(o===""||a===""){console.log("Email or password is empty"),f("Email or Password is empty");return}ne.promise((async()=>{const u=le(ue(ce,"users"),ie("email","==",o)),$=await de(u);let E=!1;try{for(const r of $.docs){E=!0;const _=r.data();if(console.log("Document data:",_),_.userRole==="teacher")if(_.password===a){console.log("User is a Teacher");const m=_.UID;J.set(m);const h=localStorage.getItem("userId");me("../Attendance"),n("Log In Successful");return}else throw console.log("Wrong Password"),new Error("Wrong Password");else throw console.log("User is not a Teacher"),new Error("User is not a Teacher")}if(!E)throw console.log("User not found"),new Error("Login failed")}catch(r){throw console.error("Error during login:",r),new Error("Login failed")}})(),{loading:"Logging In...",success:"Log In Successful",error:u=>u.message})})}X(()=>{J.subscribe(n=>{localStorage.userId=n})});function T(){o=this.value,p(0,o)}function w(){a=this.value,p(1,a)}return[o,a,U,T,w]}class xe extends Y{constructor(d){super(),Z(this,d,he,pe,K,{})}}export{xe as component};
