import{s as Y,r as Z,o as ee}from"../chunks/scheduler.1f72109c.js";import{S as te,i as se,g as r,s as D,r as re,h as a,y as V,c as L,j as C,f,u as ae,k as t,a as A,x as s,B as j,v as oe,D as W,d as le,t as ne,w as ie}from"../chunks/index.b6362bb0.js";import{u as X,e as ue,q as ce,w as de,c as me,f as fe,g as pe}from"../chunks/Toaster.svelte_svelte_type_style_lang.57c74469.js";import{T as ve}from"../chunks/Toaster.b017b8b2.js";import{g as he}from"../chunks/navigation.eac2e1e9.js";function ge(y){let u,$='<a href="/.."><button class=""><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-left-circle-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"></path></svg></button></a>',p,o,w,v,g,T='<a href="/.."><img src="Mwenzi5.png" class="w-64 duration-500 hover:scale-105 hover:-translate-10" alt="..."/></a>',P,h,c,d,n,I="Email",M,l,z,_,x,F="Password",N,i,O,b,G="Log In",S,E,k,R,J;return E=new ve({}),{c(){u=r("div"),u.innerHTML=$,p=D(),o=r("div"),w=r("div"),v=r("div"),g=r("div"),g.innerHTML=T,P=D(),h=r("div"),c=r("form"),d=r("div"),n=r("label"),n.textContent=I,M=D(),l=r("input"),z=D(),_=r("div"),x=r("label"),x.textContent=F,N=D(),i=r("input"),O=D(),b=r("button"),b.textContent=G,S=D(),re(E.$$.fragment),this.h()},l(e){u=a(e,"DIV",{class:!0,"data-svelte-h":!0}),V(u)!=="svelte-q6mc7t"&&(u.innerHTML=$),p=L(e),o=a(e,"DIV",{class:!0});var m=C(o);w=a(m,"DIV",{class:!0});var K=C(w);v=a(K,"DIV",{class:!0});var q=C(v);g=a(q,"DIV",{class:!0,"data-svelte-h":!0}),V(g)!=="svelte-1a5vo6i"&&(g.innerHTML=T),P=L(q),h=a(q,"DIV",{class:!0});var Q=C(h);c=a(Q,"FORM",{});var U=C(c);d=a(U,"DIV",{class:!0});var H=C(d);n=a(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(n)!=="svelte-lgsm1b"&&(n.textContent=I),M=L(H),l=a(H,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),H.forEach(f),z=L(U),_=a(U,"DIV",{class:!0});var B=C(_);x=a(B,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(x)!=="svelte-1mnn4ft"&&(x.textContent=F),N=L(B),i=a(B,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),B.forEach(f),O=L(U),b=a(U,"BUTTON",{class:!0,"data-svelte-h":!0}),V(b)!=="svelte-yc3tel"&&(b.textContent=G),U.forEach(f),Q.forEach(f),q.forEach(f),K.forEach(f),m.forEach(f),S=L(e),ae(E.$$.fragment,e),this.h()},h(){t(u,"class","absolute ml-5 mt-4"),t(g,"class","flex justify-center"),t(n,"for","email"),t(n,"class","block mb-2 text-md font-medium text-gray"),t(l,"type","email"),t(l,"name","email"),t(l,"id","email"),t(l,"placeholder","Email"),t(l,"class","w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-3xl focus:outline-none"),t(d,"class","mb-4"),t(x,"for","password"),t(x,"class","block mb-2 text-md font-medium text-gray"),t(i,"type","password"),t(i,"name","password"),t(i,"id","password"),t(i,"placeholder","Password"),t(i,"class","w-full px-3 py-2 placeholder-gray-300 border border-gray-300 rounded-3xl focus:outline-none"),t(_,"class","mb-5"),t(b,"class","w-full px-3 py-3 mt-1 text-white bg-[#2ea44f] focus:outline-none font-medium rounded-3xl hover:bg-[#1e7d3f] duration-300 hover:scale-105"),t(h,"class","mt-7 mx-12"),t(v,"class","max-w-md mx-auto"),t(w,"class","container mx-auto"),t(o,"class","pb-5 flex items-center justify-center min-h-screen px-5")},m(e,m){A(e,u,m),A(e,p,m),A(e,o,m),s(o,w),s(w,v),s(v,g),s(v,P),s(v,h),s(h,c),s(c,d),s(d,n),s(d,M),s(d,l),j(l,y[0]),s(c,z),s(c,_),s(_,x),s(_,N),s(_,i),j(i,y[1]),s(c,O),s(c,b),A(e,S,m),oe(E,e,m),k=!0,R||(J=[W(l,"input",y[3]),W(i,"input",y[4]),W(b,"click",y[2])],R=!0)},p(e,[m]){m&1&&l.value!==e[0]&&j(l,e[0]),m&2&&i.value!==e[1]&&j(i,e[1])},i(e){k||(le(E.$$.fragment,e),k=!0)},o(e){ne(E.$$.fragment,e),k=!1},d(e){e&&(f(u),f(p),f(o),f(S)),ie(E,e),R=!1,Z(J)}}}function we(y,u,$){let p="",o="";async function w(){return new Promise(async(T,P)=>{if(p===""||o===""){console.log("Email or password is empty"),P("Email or Password is empty");return}ue.promise((async()=>{const h=ce(me(fe,"users"),de("email","==",p)),c=await pe(h);let d=!1;try{for(const n of c.docs){d=!0;const I=n.data();if(console.log("Document data:",I),I.userRole==="teacher")if(I.password===o){console.log("User is a Teacher");const M=I.UID;X.set(M);const l=localStorage.getItem("userId");he("../Attendance"),T("Log In Successful");return}else throw console.log("Wrong Password"),new Error("Wrong Password");else throw console.log("User is not a Teacher"),new Error("User is not a Teacher")}if(!d)throw console.log("User not found"),new Error("Login failed")}catch(n){throw console.error("Error during login:",n),new Error("Login failed")}})(),{loading:"Logging In...",success:"Log In Successful",error:h=>h.message})})}ee(()=>{X.subscribe(T=>{localStorage.userId=T})});function v(){p=this.value,$(0,p)}function g(){o=this.value,$(1,o)}return[p,o,w,v,g]}class Ee extends te{constructor(u){super(),se(this,u,we,ge,Y,{})}}export{Ee as component};
