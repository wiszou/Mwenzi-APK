import{s as st,f as ot,h as rt,r as ct,o as it}from"../chunks/scheduler.1f72109c.js";import{S as ut,i as dt,g,s as j,z as Me,r as ht,h as _,j as A,y as H,c as L,A as He,f as y,u as ft,k as o,B as U,a as oe,x as n,C as Ze,v as gt,D as X,d as _t,t as vt,E as Ge,w as pt,e as Ye,m as Ee,n as Se,o as Ae,F as mt}from"../chunks/index.b6362bb0.js";import{e as we,T as bt}from"../chunks/Toaster.44b2d701.js";import{u as xt,s as yt,t as wt,a as Ct,i as kt,c as ne,q as Xe,w as Re,g as Ce,d as he,o as Je,b as ke,h as Te,e as Tt,f as se,r as Et,j as St,k as At,l as Dt}from"../chunks/Toaster.svelte_svelte_type_style_lang.9536831a.js";import{g as Nt}from"../chunks/navigation.4854b6b4.js";function Qe(r,e,t){const u=r.slice();return u[41]=e[t],u}function We(r,e,t){const u=r.slice();return u[44]=e[t],u}function It(r){let e,t=r[44].id+"",u,l,c;return{c(){e=g("option"),u=Ee(t),l=j(),this.h()},l(a){e=_(a,"OPTION",{class:!0});var d=A(e);u=Se(d,t),l=L(d),d.forEach(y),this.h()},h(){o(e,"class","rounded-xl"),e.__value=c=r[44].id,U(e,e.__value)},m(a,d){oe(a,e,d),n(e,u),n(e,l)},p(a,d){d[0]&4&&t!==(t=a[44].id+"")&&Ae(u,t),d[0]&4&&c!==(c=a[44].id)&&(e.__value=c,U(e,e.__value))},d(a){a&&y(e)}}}function Ot(r){let e,t=r[44].id+"",u,l,c;return{c(){e=g("option"),u=Ee(t),l=j(),this.h()},l(a){e=_(a,"OPTION",{class:!0});var d=A(e);u=Se(d,t),l=L(d),d.forEach(y),this.h()},h(){e.selected=!0,o(e,"class","rounded-xl"),e.__value=c=r[44].id,U(e,e.__value)},m(a,d){oe(a,e,d),n(e,u),n(e,l)},p(a,d){d[0]&4&&t!==(t=a[44].id+"")&&Ae(u,t),d[0]&4&&c!==(c=a[44].id)&&(e.__value=c,U(e,e.__value))},d(a){a&&y(e)}}}function et(r){let e;function t(c,a){return c[0]==c[44].id?Ot:It}let u=t(r),l=u(r);return{c(){l.c(),e=Ye()},l(c){l.l(c),e=Ye()},m(c,a){l.m(c,a),oe(c,e,a)},p(c,a){u===(u=t(c))&&l?l.p(c,a):(l.d(1),l=u(c),l&&(l.c(),l.m(e.parentNode,e)))},d(c){c&&y(e),l.d(c)}}}function tt(r){let e,t,u="Present",l,c="Absent",a,d="Late",k,w;function D(...i){return r[13](r[41],...i)}return{c(){e=g("select"),t=g("option"),t.textContent=u,l=g("option"),l.textContent=c,a=g("option"),a.textContent=d,this.h()},l(i){e=_(i,"SELECT",{id:!0,class:!0});var v=A(e);t=_(v,"OPTION",{"data-svelte-h":!0}),H(t)!=="svelte-18i03hi"&&(t.textContent=u),l=_(v,"OPTION",{"data-svelte-h":!0}),H(l)!=="svelte-rmw58x"&&(l.textContent=c),a=_(v,"OPTION",{"data-svelte-h":!0}),H(a)!=="svelte-18kq4q0"&&(a.textContent=d),v.forEach(y),this.h()},h(){t.selected=!0,t.__value="Present",U(t,t.__value),l.__value="Absent",U(l,l.__value),a.__value="Late",U(a,a.__value),o(e,"id","studentStatus"),o(e,"class","select select-xs bg-green-500 focus:none text-white rounded-full w-22 text-xs")},m(i,v){oe(i,e,v),n(e,t),n(e,l),n(e,a),k||(w=X(e,"change",D),k=!0)},p(i,v){r=i},d(i){i&&y(e),k=!1,w()}}}function at(r){let e,t,u="Present",l,c="Absent",a,d="Late",k,w;function D(...i){return r[14](r[41],...i)}return{c(){e=g("select"),t=g("option"),t.textContent=u,l=g("option"),l.textContent=c,a=g("option"),a.textContent=d,this.h()},l(i){e=_(i,"SELECT",{id:!0,class:!0});var v=A(e);t=_(v,"OPTION",{"data-svelte-h":!0}),H(t)!=="svelte-b4gmlz"&&(t.textContent=u),l=_(v,"OPTION",{"data-svelte-h":!0}),H(l)!=="svelte-91jnc4"&&(l.textContent=c),a=_(v,"OPTION",{"data-svelte-h":!0}),H(a)!=="svelte-18kq4q0"&&(a.textContent=d),v.forEach(y),this.h()},h(){t.__value="Present",U(t,t.__value),l.selected=!0,l.__value="Absent",U(l,l.__value),a.__value="Late",U(a,a.__value),o(e,"id","studentStatus"),o(e,"class","select select-xs bg-red-500 focus:none text-white rounded-full w-22 text-xs")},m(i,v){oe(i,e,v),n(e,t),n(e,l),n(e,a),k||(w=X(e,"change",D),k=!0)},p(i,v){r=i},d(i){i&&y(e),k=!1,w()}}}function lt(r){let e,t,u="Present",l,c="Absent",a,d="Late",k,w;function D(...i){return r[15](r[41],...i)}return{c(){e=g("select"),t=g("option"),t.textContent=u,l=g("option"),l.textContent=c,a=g("option"),a.textContent=d,this.h()},l(i){e=_(i,"SELECT",{class:!0});var v=A(e);t=_(v,"OPTION",{"data-svelte-h":!0}),H(t)!=="svelte-b4gmlz"&&(t.textContent=u),l=_(v,"OPTION",{"data-svelte-h":!0}),H(l)!=="svelte-rmw58x"&&(l.textContent=c),a=_(v,"OPTION",{"data-svelte-h":!0}),H(a)!=="svelte-svor0n"&&(a.textContent=d),v.forEach(y),this.h()},h(){t.__value="Present",U(t,t.__value),l.__value="Absent",U(l,l.__value),a.selected=!0,a.__value="Late",U(a,a.__value),o(e,"class","select select-xs bg-yellow-500 focus:none text-white rounded-full w-22 text-xs")},m(i,v){oe(i,e,v),n(e,t),n(e,l),n(e,a),k||(w=X(e,"change",D),k=!0)},p(i,v){r=i},d(i){i&&y(e),k=!1,w()}}}function nt(r){let e,t,u=r[41].name+"",l,c,a,d=r[41].time+"",k,w,D,i,v,P,N=r[41].status=="Present"&&r[41].late==="False"&&tt(r),S=r[41].status=="Absent"&&r[41].late==="False"&&at(r),O=r[41].late==="True"&&lt(r);return{c(){e=g("tr"),t=g("td"),l=Ee(u),c=j(),a=g("td"),k=Ee(d),w=j(),D=g("td"),N&&N.c(),i=j(),S&&S.c(),v=j(),O&&O.c(),P=j(),this.h()},l(C){e=_(C,"TR",{class:!0});var I=A(e);t=_(I,"TD",{class:!0});var V=A(t);l=Se(V,u),V.forEach(y),c=L(I),a=_(I,"TD",{class:!0});var ee=A(a);k=Se(ee,d),ee.forEach(y),w=L(I),D=_(I,"TD",{class:!0});var $=A(D);N&&N.l($),i=L($),S&&S.l($),v=L($),O&&O.l($),$.forEach(y),P=L(I),I.forEach(y),this.h()},h(){o(t,"class","py-4 text-left pl-4"),o(a,"class","text-center"),o(D,"class","text-center"),o(e,"class","bg-white border-b dark:bg-gray-800 dark:border-gray-700")},m(C,I){oe(C,e,I),n(e,t),n(t,l),n(e,c),n(e,a),n(a,k),n(e,w),n(e,D),N&&N.m(D,null),n(D,i),S&&S.m(D,null),n(D,v),O&&O.m(D,null),n(e,P)},p(C,I){I[0]&8&&u!==(u=C[41].name+"")&&Ae(l,u),I[0]&8&&d!==(d=C[41].time+"")&&Ae(k,d),C[41].status=="Present"&&C[41].late==="False"?N?N.p(C,I):(N=tt(C),N.c(),N.m(D,i)):N&&(N.d(1),N=null),C[41].status=="Absent"&&C[41].late==="False"?S?S.p(C,I):(S=at(C),S.c(),S.m(D,v)):S&&(S.d(1),S=null),C[41].late==="True"?O?O.p(C,I):(O=lt(C),O.c(),O.m(D,null)):O&&(O.d(1),O=null)},d(C){C&&y(e),N&&N.d(),S&&S.d(),O&&O.d()}}}function jt(r){let e,t,u,l,c,a='<img src="Mwenzi5.png" class="h-14 pb-2" alt="..."/>',d,k,w,D="Hi, Mwenzi Teacher",i,v,P,N,S,O,C,I,V,ee="Log out",$,Z,B,K,De="Select Class",fe,G,ge,re,J,te,s='<tr><th scope="col" class="px-5 py-4 text-left">Student</th> <th scope="col" class="px-6 py-4 text-center">Time</th> <th scope="col" class="px-6 py-4 text-center">Status</th></tr>',h,T,f,m,b,E,F='<svg xmlns="http://www.w3.org/2000/svg" width="27" height="28" fill="currentColor" class="bi bi-person-fill-check text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path d="M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z"></path></svg> <span class="text-sm text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Attendance</span>',Y,q,_e='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" fill="currentColor" class="bi bi-award-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"></path><path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Points</span>',Ne,Q,ze='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="28" fill="currentColor" class="bi bi-sticky-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 17 17"><path d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1h-11zm6 8.5a1 1 0 0 1 1-1h4.396a.25.25 0 0 1 .177.427l-5.146 5.146a.25.25 0 0 1-.427-.177V9.5z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Notes</span>',Ie,W,Be='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" fill="currentColor" class="bi bi-grid-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 17 17"><path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Actions</span>',Oe,ce,ve,je,Fe,ue=we(r[2]),R=[];for(let x=0;x<ue.length;x+=1)R[x]=et(We(r,ue,x));let de=we(r[3]),z=[];for(let x=0;x<de.length;x+=1)z[x]=nt(Qe(r,de,x));return ce=new bt({}),{c(){e=g("body"),t=g("header"),u=g("div"),l=g("div"),c=g("nav"),c.innerHTML=a,d=j(),k=g("div"),w=g("p"),w.textContent=D,i=j(),v=g("button"),P=Me("svg"),N=Me("path"),S=Me("path"),O=j(),C=g("ul"),I=g("li"),V=g("a"),V.textContent=ee,$=j(),Z=g("div"),B=g("select"),K=g("option"),K.textContent=De;for(let x=0;x<R.length;x+=1)R[x].c();fe=j(),G=g("input"),ge=j(),re=g("div"),J=g("table"),te=g("thead"),te.innerHTML=s,h=j(),T=g("tbody");for(let x=0;x<z.length;x+=1)z[x].c();f=j(),m=g("div"),b=g("div"),E=g("button"),E.innerHTML=F,Y=j(),q=g("button"),q.innerHTML=_e,Ne=j(),Q=g("button"),Q.innerHTML=ze,Ie=j(),W=g("button"),W.innerHTML=Be,Oe=j(),ht(ce.$$.fragment),this.h()},l(x){e=_(x,"BODY",{class:!0});var M=A(e);t=_(M,"HEADER",{class:!0});var p=A(t);u=_(p,"DIV",{class:!0});var ae=A(u);l=_(ae,"DIV",{class:!0});var pe=A(l);c=_(pe,"NAV",{class:!0,"data-svelte-h":!0}),H(c)!=="svelte-1njl2ha"&&(c.innerHTML=a),d=L(pe),k=_(pe,"DIV",{class:!0});var me=A(k);w=_(me,"P",{class:!0,id:!0,"data-svelte-h":!0}),H(w)!=="svelte-kjnun9"&&(w.textContent=D),i=L(me),v=_(me,"BUTTON",{class:!0});var be=A(v);P=He(be,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Le=A(P);N=He(Le,"path",{d:!0}),A(N).forEach(y),S=He(Le,"path",{"fill-rule":!0,d:!0}),A(S).forEach(y),Le.forEach(y),O=L(be),C=_(be,"UL",{tabindex:!0,class:!0});var qe=A(C);I=_(qe,"LI",{class:!0});var Ve=A(I);V=_(Ve,"A",{class:!0,"data-svelte-h":!0}),H(V)!=="svelte-ajmpfp"&&(V.textContent=ee),Ve.forEach(y),qe.forEach(y),be.forEach(y),me.forEach(y),pe.forEach(y),ae.forEach(y),p.forEach(y),$=L(M),Z=_(M,"DIV",{class:!0});var xe=A(Z);B=_(xe,"SELECT",{id:!0,class:!0});var Pe=A(B);K=_(Pe,"OPTION",{"data-svelte-h":!0}),H(K)!=="svelte-nnppqb"&&(K.textContent=De);for(let ie=0;ie<R.length;ie+=1)R[ie].l(Pe);Pe.forEach(y),fe=L(xe),G=_(xe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),xe.forEach(y),ge=L(M),re=_(M,"DIV",{class:!0});var Ue=A(re);J=_(Ue,"TABLE",{class:!0});var ye=A(J);te=_(ye,"THEAD",{class:!0,"data-svelte-h":!0}),H(te)!=="svelte-i0ityr"&&(te.innerHTML=s),h=L(ye),T=_(ye,"TBODY",{});var $e=A(T);for(let ie=0;ie<z.length;ie+=1)z[ie].l($e);$e.forEach(y),ye.forEach(y),Ue.forEach(y),f=L(M),m=_(M,"DIV",{id:!0,class:!0});var Ke=A(m);b=_(Ke,"DIV",{class:!0});var le=A(b);E=_(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(E)!=="svelte-vxz2z1"&&(E.innerHTML=F),Y=L(le),q=_(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(q)!=="svelte-1jmo1ga"&&(q.innerHTML=_e),Ne=L(le),Q=_(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(Q)!=="svelte-1u5yeon"&&(Q.innerHTML=ze),Ie=L(le),W=_(le,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(W)!=="svelte-jmxo9m"&&(W.innerHTML=Be),le.forEach(y),Ke.forEach(y),Oe=L(M),ft(ce.$$.fragment,M),M.forEach(y),this.h()},h(){o(c,"class","flex"),o(w,"class","font-medium text-md my-auto mr-3"),o(w,"id","userName"),o(N,"d","M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"),o(S,"fill-rule","evenodd"),o(S,"d","M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"),o(P,"xmlns","http://www.w3.org/2000/svg"),o(P,"width","28"),o(P,"height","28"),o(P,"fill","green"),o(P,"class","bi bi-person-circle"),o(P,"viewBox","0 0 16 16"),o(V,"class","py-1 flex justify-center font-medium text-sm"),o(I,"class","rounded-2xl hover:bg-gray-200"),o(C,"tabindex","0"),o(C,"class","text-center rounded-2xl mt-2 dropdown-content shadow bg-base-100 w-24"),o(v,"class","dropdown dropdown-end"),o(k,"class","flex flex-row"),o(l,"class","w-full flex flex-row justify-between"),o(u,"class","mx-6 flex flex-wrap pt-5 flex-col md:flex-row items-center"),o(t,"class","header text-gray-600 body-font svelte-s9tab1"),K.disabled=!0,K.selected=!0,K.__value="Select Class",U(K,K.__value),o(B,"id","classSelection"),o(B,"class","select select-bordered font-medium focus:outline-1 w-full rounded-3xl max-w-xs"),r[1]===void 0&&ot(()=>r[10].call(B)),o(G,"id","dateSelector1"),o(G,"type","date"),o(G,"placeholder","dd/mm/yyyy"),o(G,"class","bg-white w-56 h-12 font-medium text-sm text-center mx-2 rounded-3xl border border-gray-300 px-2 focus:outline-1 focus:outline-gray-300"),G.value=rt+";",o(Z,"class","flex justify-center mt-4 mx-6"),o(te,"class","text-xs text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0"),o(J,"class","text-sm text-gray-500 dark:text-gray-400 w-full rounded-lg shadow-sm"),o(re,"class","mt-5 px-4 items-center text-center h-3/4 overflow-y-auto"),o(E,"type","button"),o(E,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),o(q,"type","button"),o(q,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),o(Q,"type","button"),o(Q,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),o(W,"type","button"),o(W,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),o(b,"class","grid h-full max-w-lg grid-cols-4 mx-auto font-medium"),o(m,"id","bottomnav"),o(m,"class","fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600 svelte-s9tab1"),o(e,"class","h-screen")},m(x,M){oe(x,e,M),n(e,t),n(t,u),n(u,l),n(l,c),n(l,d),n(l,k),n(k,w),n(k,i),n(k,v),n(v,P),n(P,N),n(P,S),n(v,O),n(v,C),n(C,I),n(I,V),n(e,$),n(e,Z),n(Z,B),n(B,K);for(let p=0;p<R.length;p+=1)R[p]&&R[p].m(B,null);Ze(B,r[1],!0),n(Z,fe),n(Z,G),n(e,ge),n(e,re),n(re,J),n(J,te),n(J,h),n(J,T);for(let p=0;p<z.length;p+=1)z[p]&&z[p].m(T,null);n(e,f),n(e,m),n(m,b),n(b,E),n(b,Y),n(b,q),n(b,Ne),n(b,Q),n(b,Ie),n(b,W),n(e,Oe),gt(ce,e,null),ve=!0,je||(Fe=[X(V,"click",r[9]),X(B,"change",r[10]),X(B,"change",r[11]),X(G,"change",r[12]),X(q,"click",r[16]),X(Q,"click",r[17]),X(W,"click",r[18])],je=!0)},p(x,M){if(M[0]&5){ue=we(x[2]);let p;for(p=0;p<ue.length;p+=1){const ae=We(x,ue,p);R[p]?R[p].p(ae,M):(R[p]=et(ae),R[p].c(),R[p].m(B,null))}for(;p<R.length;p+=1)R[p].d(1);R.length=ue.length}if(M[0]&6&&Ze(B,x[1]),M[0]&72){de=we(x[3]);let p;for(p=0;p<de.length;p+=1){const ae=Qe(x,de,p);z[p]?z[p].p(ae,M):(z[p]=nt(ae),z[p].c(),z[p].m(T,null))}for(;p<z.length;p+=1)z[p].d(1);z.length=de.length}},i(x){ve||(_t(ce.$$.fragment,x),ve=!0)},o(x){vt(ce.$$.fragment,x),ve=!1},d(x){x&&y(e),Ge(R,x),Ge(z,x),pt(ce),je=!1,ct(Fe)}}}function Lt(r,e,t){let u;async function l(s){localStorage.setItem("selectedSubject",s),console.log(u+"hahahahadfdsgdf")}function c(s){Nt(s)}let a="",d,k=[],w=[],D=[],i;async function v(s,h){console.log(s,h),s==="Present"||s==="Absent"?(V(s,h),console.log("test1")):s==="Late"&&V(s,h)}async function P(){const s=ne(se,"Subject",`${d}`,"Attendance");Ce(s).then(T=>{T.forEach(f=>{D.push(f.id)})}).catch(T=>{console.error("Error fetching documents:",T)}),D.sort((T,f)=>{const m=new Date(T);return new Date(f)-m}),D.shift();const h=document.getElementById("dateSelector1");h.value=i}async function N(){const s=ne(se,"Subject"),h=Xe(s,Re("teacherID","==",a)),T=await Ce(h);t(2,k=T.docs.map(f=>({id:f.id,data:f.data()})))}async function S(s){const h=document.getElementById("dateSelector1").value||i;if(console.log(h),console.log(i),s===1){const T=ne(se,"Subject",`${d}`,"Attendance"),f=he(T,await i);return Je(f,m=>{t(3,w=Object.entries(m.data()).map(([b,E])=>({id:b,...E}))),C(),O()})}if(s===2){const T=ne(se,"Subject",`${d}`,"Attendance"),f=he(T,await h);return Je(f,m=>{t(3,w=Object.entries(m.data()).map(([b,E])=>({id:b,...E}))),C(),O()})}}async function O(){const s=ne(se,"users"),h=w.map(f=>f.id);(await Ce(s,Re("studentRFID","in",h))).forEach(f=>{const m=f.data().studentRFID,b=f.data().firstName+" "+f.data().lastName,E=w.find(F=>F.id===m);E&&(E.name=b)}),w.sort((f,m)=>f.name.localeCompare(m.name)),t(3,w),console.log(w)}async function C(){const s=w.map(f=>f.id),h=Et(St()),T=s.map(f=>At(Dt(h,`RFIDATTENDANCE/${i}/${f}`),async m=>{if(m.exists()){const b=ne(se,"Subject",`${d}`,"Attendance"),E=he(b,i);try{const F=await ke(E);if(F.exists()){const Y=F.data(),q=Object.keys(Y).find(_e=>_e===f);q&&Y[q].dataStatus!=="changed"?(Y[q].time=m.val().TIME,Y[q].status="Present",Y[q].dataStatus="changed",await Te(E,Y)):console.log(`Field with ID not found or data status is already changed: ${f}`)}else console.log("Attendance document does not exist")}catch(F){console.error("Error updating attendance document:",F)}}else console.log(`No data available for ID: ${f}`)},m=>{console.error(m)}));await Promise.all(T)}function I(){fetch("https://worldtimeapi.org/api/timezone/Asia/Manila").then(s=>s.json()).then(s=>{var h=new Date(s.datetime),T=h.getFullYear(),f=h.getMonth()+1,m=h.getDate();i=T+"-"+f.toString().padStart(2,"0")+"-"+m.toString().padStart(2,"0"),console.log(i)}).catch(s=>{console.log("Error:",s)})}async function V(s,h){console.log(s);const T=ne(se,"Subject",`${d}`,"Attendance");if(s==="Present"){console.log("CHECK CGHECK 2",s);const f=he(T,i),m=await ke(f);if(m.exists()){console.log("EXIST");const b=m.data(),E=Object.keys(b).find(F=>F===h);E&&(b[E].status="Present",b[E].late="False",await Te(f,b))}}else if(s==="Absent"){console.log("CHECK CGHECK 1",s);const f=he(T,i),m=await ke(f);if(m.exists()){const b=m.data(),E=Object.keys(b).find(F=>F===h);E&&(b[E].status="Absent",b[E].late="False",await Te(f,b))}}else if(s==="Late"){console.log("CHECK CGHECK 1",s);const f=he(T,i),m=await ke(f);if(m.exists()){const b=m.data(),E=Object.keys(b).find(F=>F===h);E&&(b[E].late="True",await Te(f,b))}}Tt.success("Status succesfully changed")}async function ee(){console.log(d),N(),await P(),S(1)}async function $(s){const h=ne(se,"users"),T=Xe(h,Re("UID","==",s)),f=await Ce(T);if(f.docs.length>0){const m=f.docs[0];console.log(m.data().Name),document.getElementById("userName").textContent=m.data().firstName+" "+m.data().lastName}else return"Teacher not found"}it(()=>{const s=xt.subscribe(h=>(a=localStorage.getItem("userId"),console.log(a),$(a),N(),I(),()=>{s()}));yt.subscribe(h=>{typeof localStorage<"u"&&(localStorage.subjectSelected1=h)}),wt.subscribe(h=>{typeof localStorage<"u"&&(localStorage.timeFrom=h)}),Ct.subscribe(h=>{typeof localStorage<"u"&&(localStorage.timeTo=h)}),kt.subscribe(h=>{typeof localStorage<"u"&&(localStorage.selectedSubject=h,t(0,u=h))})});const Z=s=>c("/Teacher-Login");function B(){d=mt(this),t(1,d),t(2,k)}return[u,d,k,w,l,c,v,S,ee,Z,B,s=>{ee(),l(s.target.value)},()=>S(2),(s,h)=>v(h.target.value,s.id),(s,h)=>v(h.target.value,s.id),(s,h)=>v(h.target.value,s.id),s=>c("/Points"),s=>c("/Notes"),s=>c("/Actions")]}class Bt extends ut{constructor(e){super(),dt(this,e,Lt,jt,st,{},null,[-1,-1])}}export{Bt as component};
