import{s as st,f as nt,r as ot,o as rt}from"../chunks/scheduler.1f72109c.js";import{S as it,i as ct,g as d,s as T,z as Pe,r as dt,h as u,j as _,y as V,c as C,A as Be,f as p,u as ut,k as s,B as he,a as ze,x as l,C as Ke,v as ht,D as X,d as ft,t as gt,E as Qe,w as vt,m as ce,n as de,o as ue,F as pt}from"../chunks/index.b6362bb0.js";import{e as be,T as _t}from"../chunks/Toaster.b017b8b2.js";import{u as mt,s as xt,t as yt,a as bt,c as we,q as Xe,w as Oe,g as je,f as ke,o as wt}from"../chunks/Toaster.svelte_svelte_type_style_lang.57c74469.js";import{g as kt}from"../chunks/navigation.eac2e1e9.js";function et(h,a,v){const f=h.slice();return f[30]=a[v],f}function tt(h,a,v){const f=h.slice();return f[33]=a[v],f}function lt(h){let a,v=h[33]+"",f,x,y;return{c(){a=d("option"),f=ce(v),x=T(),this.h()},l(m){a=u(m,"OPTION",{class:!0});var r=_(a);f=de(r,v),x=C(r),r.forEach(p),this.h()},h(){s(a,"class","rounded-xl"),a.__value=y=h[33],he(a,a.__value)},m(m,r){ze(m,a,r),l(a,f),l(a,x)},p(m,r){r[0]&2&&v!==(v=m[33]+"")&&ue(f,v),r[0]&2&&y!==(y=m[33])&&(a.__value=y,he(a,a.__value))},d(m){m&&p(a)}}}function at(h){let a,v,f=h[30].ranking+"",x,y,m,r=h[30].name+"",A,I,j,q=h[30].totalPoints+"",L,k,M,P=h[30].day+"",U,z,N,B=h[30].week+"",Y,G;return{c(){a=d("tr"),v=d("td"),x=ce(f),y=T(),m=d("td"),A=ce(r),I=T(),j=d("td"),L=ce(q),k=T(),M=d("td"),U=ce(P),z=T(),N=d("td"),Y=ce(B),G=T(),this.h()},l(b){a=u(b,"TR",{class:!0});var t=_(a);v=u(t,"TD",{class:!0});var o=_(v);x=de(o,f),o.forEach(p),y=C(t),m=u(t,"TD",{class:!0});var w=_(m);A=de(w,r),w.forEach(p),I=C(t),j=u(t,"TD",{id:!0,class:!0});var n=_(j);L=de(n,q),n.forEach(p),k=C(t),M=u(t,"TD",{id:!0,class:!0});var e=_(M);U=de(e,P),e.forEach(p),z=C(t),N=u(t,"TD",{id:!0,class:!0});var g=_(N);Y=de(g,B),g.forEach(p),G=C(t),t.forEach(p),this.h()},h(){s(v,"class","py-4 text-center"),s(m,"class","text-center"),s(j,"id","pointsDisplay1"),s(j,"class","pointsDisplay1 text-center"),s(M,"id","pointsDisplay2"),s(M,"class","pointsDisplay2 text-center"),M.hidden=!0,s(N,"id","pointsDisplay3"),s(N,"class","pointsDisplay3 text-center"),N.hidden=!0,s(a,"class","bg-white border-b dark:bg-gray-800 dark:border-gray-700")},m(b,t){ze(b,a,t),l(a,v),l(v,x),l(a,y),l(a,m),l(m,A),l(a,I),l(a,j),l(j,L),l(a,k),l(a,M),l(M,U),l(a,z),l(a,N),l(N,Y),l(a,G)},p(b,t){t[0]&4&&f!==(f=b[30].ranking+"")&&ue(x,f),t[0]&4&&r!==(r=b[30].name+"")&&ue(A,r),t[0]&4&&q!==(q=b[30].totalPoints+"")&&ue(L,q),t[0]&4&&P!==(P=b[30].day+"")&&ue(U,P),t[0]&4&&B!==(B=b[30].week+"")&&ue(Y,B)},d(b){b&&p(a)}}}function Et(h){let a,v,f,x,y,m='<img src="Mwenzi5.png" class="h-14 pb-2" alt="..."/>',r,A,I,j="Hi, Mwenzi Teacher",q,L,k,M,P,U,z,N,B,Y="Log out",G,b,t,o,w="Select Class",n,e,g,ee="Total Points",O,fe="Daily",R,Re="Weekly",Ee,ne,J,te,He='<tr><th scope="col" class="px-6 py-4 text-center">Rank</th> <th scope="col" class="px-6 py-4 text-center">Student</th> <th scope="col" class="px-6 py-4 text-center">Points</th></tr>',Te,oe,Ce,le,H,F,Ve='<svg xmlns="http://www.w3.org/2000/svg" width="27" height="28" fill="currentColor" class="bi bi-person-fill-check text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path d="M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Attendance</span>',De,$,qe='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" fill="currentColor" class="bi bi-award-fill text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 16 16"><path d="m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"></path><path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"></path></svg> <span class="text-sm text-blue-500 dark:text-blue-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Points</span>',Se,W,Ue='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="28" fill="currentColor" class="bi bi-sticky-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 17 17"><path d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 15 8.586V2.5A1.5 1.5 0 0 0 13.5 1h-11zm6 8.5a1 1 0 0 1 1-1h4.396a.25.25 0 0 1 .177.427l-5.146 5.146a.25.25 0 0 1-.427-.177V9.5z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Notes</span>',Ae,Z,Fe='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="28" fill="currentColor" class="bi bi-grid-fill text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" viewBox="0 0 17 17"><path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3z"></path></svg> <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Modules</span>',Me,ae,ge,Ne,$e,re=be(h[1]),D=[];for(let c=0;c<re.length;c+=1)D[c]=lt(tt(h,re,c));let ie=be(h[2]),S=[];for(let c=0;c<ie.length;c+=1)S[c]=at(et(h,ie,c));return ae=new _t({}),{c(){a=d("body"),v=d("header"),f=d("div"),x=d("div"),y=d("nav"),y.innerHTML=m,r=T(),A=d("div"),I=d("p"),I.textContent=j,q=T(),L=d("button"),k=Pe("svg"),M=Pe("path"),P=Pe("path"),U=T(),z=d("ul"),N=d("li"),B=d("a"),B.textContent=Y,G=T(),b=d("div"),t=d("select"),o=d("option"),o.textContent=w;for(let c=0;c<D.length;c+=1)D[c].c();n=T(),e=d("select"),g=d("option"),g.textContent=ee,O=d("option"),O.textContent=fe,R=d("option"),R.textContent=Re,Ee=T(),ne=d("div"),J=d("table"),te=d("thead"),te.innerHTML=He,Te=T(),oe=d("tbody");for(let c=0;c<S.length;c+=1)S[c].c();Ce=T(),le=d("div"),H=d("div"),F=d("button"),F.innerHTML=Ve,De=T(),$=d("button"),$.innerHTML=qe,Se=T(),W=d("button"),W.innerHTML=Ue,Ae=T(),Z=d("button"),Z.innerHTML=Fe,Me=T(),dt(ae.$$.fragment),this.h()},l(c){a=u(c,"BODY",{class:!0});var E=_(a);v=u(E,"HEADER",{class:!0});var i=_(v);f=u(i,"DIV",{class:!0});var K=_(f);x=u(K,"DIV",{class:!0});var ve=_(x);y=u(ve,"NAV",{class:!0,"data-svelte-h":!0}),V(y)!=="svelte-1njl2ha"&&(y.innerHTML=m),r=C(ve),A=u(ve,"DIV",{class:!0});var pe=_(A);I=u(pe,"P",{class:!0,id:!0,"data-svelte-h":!0}),V(I)!=="svelte-kjnun9"&&(I.textContent=j),q=C(pe),L=u(pe,"BUTTON",{class:!0});var _e=_(L);k=Be(_e,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,class:!0,viewBox:!0});var Ie=_(k);M=Be(Ie,"path",{d:!0}),_(M).forEach(p),P=Be(Ie,"path",{"fill-rule":!0,d:!0}),_(P).forEach(p),Ie.forEach(p),U=C(_e),z=u(_e,"UL",{tabindex:!0,class:!0});var We=_(z);N=u(We,"LI",{class:!0});var Ze=_(N);B=u(Ze,"A",{class:!0,"data-svelte-h":!0}),V(B)!=="svelte-no50v0"&&(B.textContent=Y),Ze.forEach(p),We.forEach(p),_e.forEach(p),pe.forEach(p),ve.forEach(p),K.forEach(p),i.forEach(p),G=C(E),b=u(E,"DIV",{class:!0});var me=_(b);t=u(me,"SELECT",{id:!0,class:!0});var Le=_(t);o=u(Le,"OPTION",{"data-svelte-h":!0}),V(o)!=="svelte-nnppqb"&&(o.textContent=w);for(let se=0;se<D.length;se+=1)D[se].l(Le);Le.forEach(p),n=C(me),e=u(me,"SELECT",{id:!0,class:!0});var xe=_(e);g=u(xe,"OPTION",{class:!0,"data-svelte-h":!0}),V(g)!=="svelte-10rrb4u"&&(g.textContent=ee),O=u(xe,"OPTION",{class:!0,"data-svelte-h":!0}),V(O)!=="svelte-1le78di"&&(O.textContent=fe),R=u(xe,"OPTION",{class:!0,"data-svelte-h":!0}),V(R)!=="svelte-1knbarg"&&(R.textContent=Re),xe.forEach(p),me.forEach(p),Ee=C(E),ne=u(E,"DIV",{class:!0});var Ye=_(ne);J=u(Ye,"TABLE",{class:!0});var ye=_(J);te=u(ye,"THEAD",{class:!0,"data-svelte-h":!0}),V(te)!=="svelte-ght1qk"&&(te.innerHTML=He),Te=C(ye),oe=u(ye,"TBODY",{});var Ge=_(oe);for(let se=0;se<S.length;se+=1)S[se].l(Ge);Ge.forEach(p),ye.forEach(p),Ye.forEach(p),Ce=C(E),le=u(E,"DIV",{id:!0,class:!0});var Je=_(le);H=u(Je,"DIV",{class:!0});var Q=_(H);F=u(Q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(F)!=="svelte-13p6lth"&&(F.innerHTML=Ve),De=C(Q),$=u(Q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V($)!=="svelte-1jsrako"&&($.innerHTML=qe),Se=C(Q),W=u(Q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(W)!=="svelte-17gho8l"&&(W.innerHTML=Ue),Ae=C(Q),Z=u(Q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(Z)!=="svelte-1l6voli"&&(Z.innerHTML=Fe),Q.forEach(p),Je.forEach(p),Me=C(E),ut(ae.$$.fragment,E),E.forEach(p),this.h()},h(){s(y,"class","flex"),s(I,"class","font-medium text-md my-auto mr-3"),s(I,"id","userName"),s(M,"d","M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"),s(P,"fill-rule","evenodd"),s(P,"d","M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"),s(k,"xmlns","http://www.w3.org/2000/svg"),s(k,"width","28"),s(k,"height","28"),s(k,"fill","green"),s(k,"class","bi bi-person-circle"),s(k,"viewBox","0 0 16 16"),s(B,"class","py-1 flex justify-center font-medium text-sm"),s(N,"class","rounded-2xl hover:bg-gray-200"),s(z,"tabindex","0"),s(z,"class","text-center rounded-2xl mt-2 dropdown-content shadow bg-base-100 w-24"),s(L,"class","dropdown dropdown-end"),s(A,"class","flex flex-row"),s(x,"class","w-full flex flex-row justify-between"),s(f,"class","mx-6 flex flex-wrap pt-5 flex-col md:flex-row items-center"),s(v,"class","text-gray-600 body-font view-transition-name: header; svelte-1s7ow3w"),o.disabled=!0,o.selected=!0,o.__value="Select Class",he(o,o.__value),s(t,"id","classSelection"),s(t,"class","select select-bordered font-medium focus:outline-1 w-full rounded-3xl max-w-xs"),h[0]===void 0&&nt(()=>h[7].call(t)),g.selected=!0,s(g,"class","rounded-3xl"),g.__value="Total Points",he(g,g.__value),s(O,"class","rounded-xl"),O.__value="Daily",he(O,O.__value),s(R,"class","rounded-xl"),R.__value="Weekly",he(R,R.__value),s(e,"id","SortRec"),s(e,"class","bg-white w-56 h-12 font-medium text-sm rounded-3xl text-center mx-2 px-2 border border-gray-300 focus:outline-1 focus:outline-gray-300"),s(b,"class","flex justify-center mt-4 mx-6"),s(te,"class","text-xs text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0"),s(J,"class","text-sm text-gray-500 dark:text-gray-400 w-full rounded-lg shadow-sm"),s(ne,"class","mt-4 px-4 items-center text-center h-3/4 overflow-y-auto"),s(F,"type","button"),s(F,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),s($,"type","button"),s($,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),s(W,"type","button"),s(W,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),s(Z,"type","button"),s(Z,"class","inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group"),s(H,"class","grid h-full max-w-lg grid-cols-4 mx-auto font-medium"),s(le,"id","bottomnav"),s(le,"class","fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600 svelte-1s7ow3w"),s(a,"class","h-screen")},m(c,E){ze(c,a,E),l(a,v),l(v,f),l(f,x),l(x,y),l(x,r),l(x,A),l(A,I),l(A,q),l(A,L),l(L,k),l(k,M),l(k,P),l(L,U),l(L,z),l(z,N),l(N,B),l(a,G),l(a,b),l(b,t),l(t,o);for(let i=0;i<D.length;i+=1)D[i]&&D[i].m(t,null);Ke(t,h[0],!0),l(b,n),l(b,e),l(e,g),l(e,O),l(e,R),l(a,Ee),l(a,ne),l(ne,J),l(J,te),l(J,Te),l(J,oe);for(let i=0;i<S.length;i+=1)S[i]&&S[i].m(oe,null);l(a,Ce),l(a,le),l(le,H),l(H,F),l(H,De),l(H,$),l(H,Se),l(H,W),l(H,Ae),l(H,Z),l(a,Me),ht(ae,a,null),ge=!0,Ne||($e=[X(B,"click",h[6]),X(t,"change",h[7]),X(t,"change",h[8]),X(e,"change",h[5]),X(F,"click",h[9]),X($,"click",h[10]),X(W,"click",h[11]),X(Z,"click",h[12])],Ne=!0)},p(c,E){if(E[0]&2){re=be(c[1]);let i;for(i=0;i<re.length;i+=1){const K=tt(c,re,i);D[i]?D[i].p(K,E):(D[i]=lt(K),D[i].c(),D[i].m(t,null))}for(;i<D.length;i+=1)D[i].d(1);D.length=re.length}if(E[0]&3&&Ke(t,c[0]),E[0]&4){ie=be(c[2]);let i;for(i=0;i<ie.length;i+=1){const K=et(c,ie,i);S[i]?S[i].p(K,E):(S[i]=at(K),S[i].c(),S[i].m(oe,null))}for(;i<S.length;i+=1)S[i].d(1);S.length=ie.length}},i(c){ge||(ft(ae.$$.fragment,c),ge=!0)},o(c){gt(ae.$$.fragment,c),ge=!1},d(c){c&&p(a),Qe(D,c),Qe(S,c),vt(ae),Ne=!1,ot($e)}}}function Tt(h,a,v){function f(t){kt(t)}let x="",y,m=[],r=[],A;async function I(){const t=we(ke,"Subject"),o=Xe(t,Oe("students","array-contains",x)),w=await je(o);v(1,m=w.docs.map(n=>n.id)),console.log(m)}async function j(){const t=document.getElementById("SortRec").value,o=we(ke,"Subject",`${y}`,"Recitation");return wt(o,w=>{v(2,r=[]),w.forEach(n=>{const e=n.data(),g=n.id,ee=e.totalPoints,O=e.week||0,fe=e.day||0,R={id:g,totalPoints:ee,week:O,day:fe};r.push(R)}),t=="Total Points"?(r.sort((n,e)=>e.totalPoints-n.totalPoints),r.forEach((n,e)=>{n.ranking=e+1}),console.log("Updated recitation array with ranking:",r),console.log("recitation array:",r)):t=="Weekly"?(r.sort((n,e)=>e.week-n.week),r.forEach((n,e)=>{n.ranking=e+1})):t=="Daily"&&(r.sort((n,e)=>e.day-n.day),r.forEach((n,e)=>{n.ranking=e+1})),q()})}async function q(){const t=we(ke,"users"),o=r.map(n=>n.id);(await je(t,Oe("studentRFID","in",o))).forEach(n=>{const e=n.data().studentRFID,g=n.data().firstName+" "+n.data().lastName,ee=r.find(O=>O.id===e);ee&&(ee.name=g)}),v(2,r)}function L(){fetch("https://worldtimeapi.org/api/timezone/Asia/Manila").then(t=>t.json()).then(t=>{var o=new Date(t.datetime),w=o.getFullYear(),n=o.getMonth()+1,e=o.getDate();A=w+"-"+n.toString().padStart(2,"0")+"-"+e.toString().padStart(2,"0"),console.log(A)}).catch(t=>{console.log("Error:",t)})}async function k(){console.log(y),I(),j(),P()}async function M(t){const o=we(ke,"users"),w=Xe(o,Oe("studentRFID","==",t)),n=await je(w);if(n.docs.length>0){const e=n.docs[0];document.getElementById("userName").textContent=e.data().firstName+" "+e.data().lastName}else return"Student not found"}async function P(){console.log("haha");const t=document.getElementById("SortRec").value,o=document.getElementsByClassName("pointsDisplay1"),w=document.getElementsByClassName("pointsDisplay2"),n=document.getElementsByClassName("pointsDisplay3");if(t==="Total Points"){for(let e=0;e<o.length;e++)o[e].hidden=!1;for(let e=0;e<w.length;e++)w[e].hidden=!0;for(let e=0;e<n.length;e++)n[e].hidden=!0;r.sort((e,g)=>g.totalPoints-e.totalPoints),r.forEach((e,g)=>{e.ranking=g+1})}if(t==="Weekly"){for(let e=0;e<o.length;e++)o[e].hidden=!0;for(let e=0;e<w.length;e++)w[e].hidden=!0;for(let e=0;e<n.length;e++)n[e].hidden=!1;r.sort((e,g)=>g.week-e.week),r.forEach((e,g)=>{e.ranking=g+1})}if(t==="Daily"){for(let e=0;e<o.length;e++)o[e].hidden=!0;for(let e=0;e<w.length;e++)w[e].hidden=!1;for(let e=0;e<n.length;e++)n[e].hidden=!0;r.sort((e,g)=>g.day-e.day),r.forEach((e,g)=>{e.ranking=g+1})}j()}rt(()=>{const t=mt.subscribe(o=>(x=localStorage.getItem("userId"),console.log(x),M(x),I(),()=>{t()}));xt.subscribe(o=>{typeof localStorage<"u"&&(localStorage.subjectSelected1=o)}),yt.subscribe(o=>{typeof localStorage<"u"&&(localStorage.timeFrom=o)}),bt.subscribe(o=>{typeof localStorage<"u"&&(localStorage.timeTo=o)})}),L();const U=t=>f("/Student-Login");function z(){y=pt(this),v(0,y),v(1,m)}return[y,m,r,f,k,P,U,z,t=>{k()},t=>f("/Student-Attendance"),t=>f("/Student-Points"),t=>f("/Student-Notes"),t=>f("/Modules")]}class Nt extends it{constructor(a){super(),ct(this,a,Tt,Et,st,{},null,[-1,-1])}}export{Nt as component};
